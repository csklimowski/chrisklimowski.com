!function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";e.__esModule=!0;var n=a(4),o=a(14),u=a(15),i=a(18),r=new Phaser.Game(1280,720,Phaser.AUTO,"game");r.state.add("load",n.LoadState),r.state.add("menu",o.MenuState),r.state.add("main",u.MainState),r.state.add("results",i.ResultsState),r.state.start("load"),e.default=r},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=function(t){function e(e){var a=this,n=u.default.levels[e];return a=t.call(this,u.default,n.x,n.y,"level-button")||this,u.default.add.existing(a),a.anchor.set(.5,.7),a.level=e,a.inputEnabled=!0,n.completed?(a.enabled=!0,a.overFrame=2,a.outFrame=12):n.unlocked?(a.enabled=!0,a.overFrame=6,a.outFrame=11):(a.enabled=!1,a.overFrame=0,a.outFrame=0),a.frame=a.outFrame,a.events.onInputOver.add((function(){this.frame=this.overFrame}),a),a.events.onInputOut.add((function(){this.frame=this.outFrame}),a),a.events.onInputDown.add((function(){u.default.sfx.click.play(),this.frame=12,this.enabled&&(u.default.currentLevel=this.level,u.default.curtain.transition("main"))}),a),a.animations.add("enable",[1,2,3,4,5,6,7,8,9,10,11],20,!1),a.animations.add("complete",[11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,10,9,8,7,6,5,4,3,2,1,12],20,!1),u.default.justCompleted===a.level&&(u.default.levels[a.level].completed=!0,a.overFrame=2,a.outFrame=12,a.events.onAnimationComplete.addOnce(a.unlockNext,a),a.animations.play("complete"),u.default.justCompleted=null),a}return o(e,t),e.prototype.unlockNext=function(){for(var t=0,e=u.default.levels[this.level].unlocks;t<e.length;t++){var a=e[t];if(!u.default.levels[a].unlocked){u.default.levels[a].unlocked=!0;var n=u.default.levels[a].button;n.enabled=!0,n.overFrame=6,n.outFrame=11,n.animations.play("enable")}}if("1-5"===this.level)for(var o=0,i=u.default.world1arrows;o<i.length;o++){(s=i[o]).enabled||(s.enabled=!0,s.animations.play("enable"))}if("2-5"===this.level)for(var r=0,l=u.default.world2arrows;r<l.length;r++){var s;(s=l[r]).enabled||(s.enabled=!0,s.animations.play("enable"))}"3-5"===this.level&&(u.default.world3arrow.enabled||(u.default.world3arrow.enabled=!0,u.default.world3arrow.animations.play("enable")))},e}(Phaser.Sprite);e.LevelButton=i;var r=function(t){function e(e,a,n,o,i){var r=t.call(this,u.default,e,a,n)||this;return u.default.add.existing(r),r.anchor.set(.5),r.targetScale=1,r.inputEnabled=!0,r.onDown=o,r.onDownContext=i,o&&r.events.onInputDown.add((function(){u.default.sfx.click.play(),this.scale.set(1),this.onDown.call(i)}),r),r.events.onInputUp.add((function(){this.scale.set(1),u.default.sfx.click.play()}),r),r.events.onInputOver.add((function(){this.scale.set(1.1)}),r),r.events.onInputOut.add((function(){this.scale.set(1)}),r),r}return o(e,t),e}(Phaser.Sprite);e.MenuButton=r;var l=function(t){function e(e,a,n,o,i,r){var l=t.call(this,e,a,"arrow")||this;return l.events.onInputDown.add((function(){u.default.sfx.click.play(),this.scale.set(1),this.enabled&&(u.default.menuX=this.menuX,u.default.menuY=this.menuY)}),l),l.angle=i,l.menuX=n,l.menuY=o,l.enabled=r,r?l.frame=11:l.animations.add("enable",[0,1,2,3,4,5,6,7,8,9,10,11],40,!1),l}return o(e,t),e}(r);e.MenuArrow=l},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=function(t){function e(e,a,n){var o,i,r,l,s=this;return"1"===n?(o=[0,1,2,3,4,5,6,7,7,7,7,7,7,7,7,7,7,6,5,4,3,2,1,0,0,0,0,0,0,0,0,0],i=8,r=1,l="one"):"2"===n?(o=[0,1,2,3,4,5,6,7,8,7,6,5,4,3,2,1,0,9,10,11,12,13,14,15,16,15,14,13,12,11,10,9],i=17,r=2,l="two"):"3"===n&&(o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],i=32,r=3,l="three"),s=t.call(this,u.default,e,a,l)||this,u.default.add.existing(s),s.anchor.set(.5),s.value=r,s.animations.add("idle",o,20,!0),s.animations.add("die",[i],0,!1),s.animations.play("idle"),s}return o(e,t),e}(Phaser.Sprite);e.Number=i;var r=function(t){function e(e,a,n){var o=t.call(this,u.default,e,a,"dot")||this;if(u.default.add.existing(o),o.anchor.set(.5),o.visited=!1,"1"===n||"2"===n||"3"===n?(o.hasNumber=!0,o.hadNumber=!1,o.number=new i(e,a,n)):(o.hasNumber=!1,o.hadNumber=!1),"X"===n){var r=u.default.add.sprite(e,a,"door");r.animations.add("unlock",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],20,!1),r.anchor.set(.5),o.door=r,o.locked=!0}else o.locked=!1;if(-1!=="abcdn".indexOf(n)){var l=u.default.add.sprite(e,a,"question-mark");l.anchor.set(.5),o.qm=l,o.hasInfo=!0}else o.hasInfo=!1;return o}return o(e,t),e.prototype.update=function(){if(this.hasInfo&&!this.everVisited&&(this.qm.rotation=Math.sin(u.default.time.now/200)/6),this.hadNumber){var t=u.default.time.elapsedMS/1e3;this.number.vy+=1e3*t,this.number.x+=this.number.vx*t,this.number.y+=this.number.vy*t,this.number.rotation+=2*t}},e.prototype.markVisited=function(){this.hasInfo&&(this.qm.scale.set(.8),this.everVisited=!0),this.visited=!0,this.frame=1},e.prototype.unmarkVisited=function(){this.visited=!1,this.frame=0},e.prototype.defeatNumber=function(){u.default.sfx.whack.play();var t=Math.random();t>.8?u.default.sfx.aah.play():t>.6&&u.default.sfx.oof.play(),this.number.animations.play("die"),this.hasNumber=!1,this.hadNumber=!0,this.number.vx=(1200-this.x)/3,this.number.vy=-1e3},e.prototype.reviveNumber=function(){this.number.animations.play("idle"),this.hasNumber=!0,this.hadNumber=!1,this.number.x=this.x,this.number.y=this.y,this.number.rotation=0},e.prototype.unlock=function(){this.locked&&(this.door.animations.play("unlock"),u.default.sfx.door.play(),this.locked=!1),this.locked=!1},e.prototype.lock=function(){this.locked||(this.door.frame=0,this.locked=!0)},e}(Phaser.Image);e.Dot=r},function(t,e,a){"use strict";e.__esModule=!0;var n=a(2);function o(t){return 150+100*t}function u(t){return 100+100*t}e.realX=o,e.realY=u,e.buildLevelMap=function(t){var e=[];e.remaining=0;for(var a=t.layout,i=0;i<a.length;i++){for(var r=[],l=0;l<a[i].length;l++){var s=a[i][l];if(" "===s)r.push(null);else{var d=new n.Dot(o(l),u(i),s);(d.hasNumber||d.hasInfo)&&e.remaining++,d.hasInfo&&(d.info=t.info[s]),r.push(d)}"N"!==s&&"n"!==s||(e.startX=l,e.startY=i,"n"===s&&e.remaining--),"X"===s&&(e.endX=l,e.endY=i)}e.push(r)}return e},e.buildProceduralMap=function(t){var e,a,n=Math.min(23,13+.5*t),o=Math.min(25,15+.5*t),u=Math.min(23,3+t),i=Math.min(25,5+t),r=0;do{r++,a=!1,e=[[" "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "," "]];var l=1+Math.floor(7*Math.random()),s=1+Math.floor(5*Math.random()),d=[],f=0,c=0,h=0;for(e[s][l]="N";;){d.push({x:l,y:s});for(var p=[],m=-1;m<2;m++)for(var g=-1;g<2;g++)if((0!==m||0!==g)&&l+m>0&&s+g>0&&l+m<8&&s+g<6){for(var y=!0,v=0;v<d.length-1;v++){if(d[v].x===l&&d[v].y===s&&d[v+1].x===l+m&&d[v+1].y===s+g){y=!1;break}if(d[v].x===l+m&&d[v].y===s+g&&d[v+1].x===l&&d[v+1].y===s){y=!1;break}}y&&p.push({x:m,y:g})}if(0===p.length){a=!0;break}var x=p[Math.floor(Math.random()*p.length)];if(l+=x.x," "===e[s+=x.y][l]){if(h>=u&&f>=n){e[s][l]="X";break}if(c<4?(e[s][l]=""+c,h+=c,3===c&&h++):e[s][l]="0",++f>o||h>i){a=!0;break}c=0}else c++}}while(a);return console.log("It took "+r+" attempts to generate this level."),{layout:e}}},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),u=this&&this.__assign||function(){return(u=Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++)for(var o in e=arguments[a])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};e.__esModule=!0;var i=a(0),r=a(5),l=a(6),s=a(7),d=a(8),f=a(9),c=a(10),h=a(11),p=a(12),m=a(13),g=a(1),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.preload=function(){i.default.add.text(i.default.width/2,i.default.height/2,"Loading...",{font:"30px sans-serif",fill:"#ffffff",align:"center"}).anchor.set(.5),i.default.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,i.default.scale.windowConstraints.bottom="layout",i.default.load.spritesheet("level-button","img/menu/level-button.png",70,70),i.default.load.spritesheet("dot","img/game/dot.png",24,24),i.default.load.spritesheet("one","img/game/one.png",100,100),i.default.load.spritesheet("two","img/game/two.png",100,100),i.default.load.spritesheet("three","img/game/three.png",100,100),i.default.load.spritesheet("door","img/game/door.png",130,130),i.default.load.spritesheet("charge","img/game/charge.png",60,60),i.default.load.spritesheet("starburst","img/game/starburst.png",150,150),i.default.load.spritesheet("numburst","img/game/numburst.png",100,100),i.default.load.spritesheet("arrow","img/menu/level-arrow.png",110,110),i.default.load.spritesheet("hint-1","img/game/hint-1.png",250,150),i.default.load.spritesheet("hint-2","img/game/hint-2.png",150,150),i.default.load.spritesheet("volume","img/volume.png",76,72),i.default.load.image("logo","img/logo.png"),i.default.load.image("paper-texture","img/paper-texture.png"),i.default.load.image("transition","img/transition.png"),i.default.load.image("pencil","img/game/pencil.png"),i.default.load.image("pen","img/game/pen.png"),i.default.load.image("puzzles","img/menu/puzzles.png"),i.default.load.image("endless-dungeon","img/menu/endless-dungeon.png"),i.default.load.image("how-to-play","img/menu/how-to-play.png"),i.default.load.image("credits","img/menu/credits.png"),i.default.load.image("info-box","img/game/info-box.png"),i.default.load.image("question-mark","img/game/question-mark.png"),i.default.load.image("undo","img/game/undo.png"),i.default.load.image("exit","img/game/exit.png"),i.default.load.image("retry","img/menu/retry.png"),i.default.load.image("main-menu","img/menu/main-menu.png"),i.default.load.image("back","img/menu/back.png"),i.default.load.image("unlock-everything","img/menu/unlock-everything.png"),i.default.load.image("credits-page","img/menu/credits-page.png"),i.default.load.image("world1","img/menu/world1.png"),i.default.load.image("worldx","img/menu/worldx.png"),i.default.load.image("world2","img/menu/world2.png"),i.default.load.image("worldy","img/menu/worldy.png"),i.default.load.image("world3","img/menu/world3.png"),i.default.load.image("worldz","img/menu/worldz.png"),i.default.load.audio("pen","sfx/pen.ogg"),i.default.load.audio("click","sfx/click.ogg"),i.default.load.audio("music","sfx/music.ogg"),i.default.load.audio("door","sfx/door.ogg"),i.default.load.audio("charge1","sfx/charge1.ogg"),i.default.load.audio("charge2","sfx/charge2.ogg"),i.default.load.audio("charge3","sfx/charge3.ogg"),i.default.load.audio("charge4","sfx/charge4.ogg"),i.default.load.audio("charge5","sfx/charge5.ogg"),i.default.load.audio("swoosh","sfx/swoosh.ogg"),i.default.load.audio("whack","sfx/whack.ogg"),i.default.load.audio("oof","sfx/oof.ogg"),i.default.load.audio("whack","sfx/whack.ogg"),i.default.load.audio("aah","sfx/aah.ogg"),i.default.load.bitmapFont("handwriting","font/hw5.png","font/hw5.fnt")},e.prototype.create=function(){if(i.default.sfx={music:i.default.add.audio("music",1,!0),pen:i.default.add.audio("pen",.8,!1),click:i.default.add.audio("click",1.2,!1),door:i.default.add.audio("door",1,!1),charge:[i.default.add.audio("charge1",1.5,!1),i.default.add.audio("charge2",1.5,!1),i.default.add.audio("charge3",1.5,!1),i.default.add.audio("charge4",1.5,!1),i.default.add.audio("charge5",1.5,!1)],swoosh:i.default.add.audio("swoosh",.15,!1),whack:i.default.add.audio("whack",.5,!1),oof:i.default.add.audio("oof",.15,!1),aah:i.default.add.audio("aah",.15,!1)},localStorage.getItem("dot_dungeons_data")){var t=localStorage.getItem("dot_dungeons_data");i.default.data=JSON.parse(t)}else i.default.data={levels:{"1-1":{unlocked:!0,completed:!1}},highScore:-1,soundSetting:0};for(var e in i.default.tutorial=h.tutorial,i.default.levels=u(u(u(u(u(u({},r.world1),l.worldx),s.world2),d.worldy),f.world3),c.worldz),i.default.levels)i.default.data.levels[e]||(i.default.data.levels[e]={unlocked:!1,completed:!1});for(var e in i.default.data.levels)i.default.levels[e].unlocked=i.default.data.levels[e].unlocked,i.default.levels[e].completed=i.default.data.levels[e].completed;i.default.soundButton=new g.MenuButton(1220,45,"volume",(function(){0===this.data.soundSetting?(this.sound.mute=!0,this.sfx.music.stop(),this.data.soundSetting=1,this.soundButton.frame=1):1===this.data.soundSetting?(this.sound.mute=!1,this.data.soundSetting=2,this.soundButton.frame=2):2===this.data.soundSetting&&(this.sfx.music.play(),this.data.soundSetting=0,this.soundButton.frame=0),localStorage.setItem("dot_dungeons_data",JSON.stringify(i.default.data))}),i.default),0===i.default.data.soundSetting?(i.default.sfx.music.play(),i.default.soundButton.frame=0):1===i.default.data.soundSetting?(i.default.sound.mute=!0,i.default.soundButton.frame=1):2===i.default.data.soundSetting&&(i.default.soundButton.frame=2),i.default.stage.addChild(i.default.soundButton),i.default.infoBox=new m.InfoBox,i.default.curtain=new p.Curtain,i.default.overlay=i.default.make.tileSprite(0,0,7680,1440,"paper-texture",0),i.default.stage.addChild(i.default.overlay),i.default.menuX=0,i.default.menuY=0,i.default.stage.backgroundColor=16777215,i.default.state.start("menu")},e}(Phaser.State);e.LoadState=y},function(t,e,a){"use strict";e.__esModule=!0,e.world1={"1-1":{x:1440,y:270,layout:["           ","   00000   ","   00000   ","  N00100X  ","   00000   ","   00000   ","           "],unlocks:["1-2"]},"1-2":{x:1700,y:270,layout:["          ","          ","   0000   ","  N0110X  ","   0000   ","          ","          "],unlocks:["1-3"]},"1-3":{x:1950,y:340,layout:["           ","           ","  N01110X  ","   00000   ","           ","           "],unlocks:["1-4"]},"1-4":{x:2050,y:500,layout:["           ","           ","    101    ","   N000X   ","    101    ","           ","           "],unlocks:["1-5"]},"1-5":{x:2330,y:550,layout:["          ","    00    ","    01    ","    01    ","    01    ","   N01X   ","          "],unlocks:["X-1","2-1"]}}},function(t,e,a){"use strict";e.__esModule=!0,e.worldx={"X-1":{x:2330,y:890,layout:["           ","   10101   ","   01110   ","  N11111X  ","   01110   ","   10101   ","           "],unlocks:["X-2"]},"X-2":{x:2050,y:940,layout:["          ","          ","   0111   ","  N0111X  ","   0111   ","          ","          "],unlocks:["X-3"]},"X-3":{x:1950,y:1100,layout:["           ","           ","  N11111X  ","   00000   ","           ","           "],unlocks:["X-4"]},"X-4":{x:1700,y:1170,layout:["           ","           ","    111    ","   N001X   ","    111    ","           ","           "],unlocks:["X-5"]},"X-5":{x:1440,y:1170,layout:["          ","    01    ","    01    ","    01    ","    01    ","   N01X   ","          "],unlocks:[]}}},function(t,e,a){"use strict";e.__esModule=!0,e.world2={"2-1":{x:2670,y:540,layout:["          ","          ","    00    ","  N0002X  ","    00    ","          ","          "],unlocks:["2-2"]},"2-2":{x:2930,y:500,layout:["          ","    00X   ","    02    ","    01    ","   N00    ","          "],unlocks:["2-3"]},"2-3":{x:3100,y:320,layout:["           ","     2     ","    010    ","   N000X   ","    010    ","     2     ","           "],unlocks:["2-4"]},"2-4":{x:3370,y:300,layout:["           ","    N X    ","   00000   ","   00 00   ","   02020   ","           "],unlocks:["2-5"]},"2-5":{x:3610,y:430,layout:["           ","    202    ","    000    ","   N000X   ","    000    ","    202    ","           "],unlocks:["Y-1","3-1"]}}},function(t,e,a){"use strict";e.__esModule=!0,e.worldy={"Y-1":{x:3610,y:1010,layout:["          ","          ","    00    ","  N0220X  ","    00    ","          ","          "],unlocks:["Y-2"]},"Y-2":{x:3370,y:1140,layout:["          ","    00X   ","    22    ","    11    ","   N00    ","          "],unlocks:["Y-3"]},"Y-3":{x:3100,y:1120,layout:["           ","     2     ","    010    ","   N121X   ","    010    ","     2     ","           "],unlocks:["Y-4"]},"Y-4":{x:2930,y:940,layout:["           ","    N X    ","   02020   ","   00 00   ","   02020   ","           "],unlocks:["Y-5"]},"Y-5":{x:2670,y:900,layout:["           ","    202   ","    000   ","   N000X   ","    000    ","    222  ","           "],unlocks:[]}}},function(t,e,a){"use strict";e.__esModule=!0,e.world3={"3-1":{x:3960,y:430,layout:["           ","           ","    000    ","   N030X   ","    000    ","           ","           "],unlocks:["3-2"]},"3-2":{x:4185,y:290,layout:["          ","   N03X   ","    02    ","    01    ","    00    ","    00    ","          "],unlocks:["3-3"]},"3-3":{x:4510,y:265,layout:["          ","          ","   0030   ","  N0000X  ","   0300   ","          ","          "],unlocks:["3-4"]},"3-4":{x:4765,y:385,layout:["           ","   00300   ","   01010   ","  N00 00X  ","   01010   ","   00300   ","           "],unlocks:["3-5"]},"3-5":{x:4850,y:585,layout:["           ","           ","   10203   ","  N00000X  ","   10203   ","           ","           "],unlocks:["Z-1"]}}},function(t,e,a){"use strict";e.__esModule=!0,e.worldz={"Z-1":{x:4850,y:855,layout:["           ","           ","    030    ","   N000X   ","    030    ","           ","           "],unlocks:["Z-2"]},"Z-2":{x:4765,y:1055,layout:["          ","   N03X   ","    02    ","    01    ","    02    ","    03    ","          "],unlocks:["Z-3"]},"Z-3":{x:4510,y:1175,layout:["          ","          ","   3003   ","  N0000X  ","   3003   ","          ","          "],unlocks:["Z-4"]},"Z-4":{x:4185,y:1150,layout:["           ","   00100   ","   03030   ","  N00 00X  ","   03030   ","   00100   ","           "],unlocks:["Z-5"]},"Z-5":{x:3960,y:1010,layout:["           ","           ","   30201   ","  N00000X  ","   30201   ","           ","           "],unlocks:[]}}},function(t,e,a){"use strict";e.__esModule=!0,e.tutorial=[{layout:["           ","    0a00b  ","  n0000    ","    0000X  ","           ","           "],info:{n:"CLICK to move!",a:"You can't retrace your own path, but you can\nrevisit dots you've been to before.",b:"If you ever get stuck, you can press           to go\nback one step."}},{layout:["           ","   000  X  ","   0 0 000 "," N000a 000 ","   0   000 ","   b0000c0 ","           "],info:{a:"Revisiting dots that you've been to before builds\nup CHARGE.",b:"But if you visit a dot for the first time, your\ncharge goes away.",c:"So, to build up a charge of more than 1, you need\nto revisit multiple dots in a row."}},{layout:["           "," Na0b0     ","   00000   ","   00010X  ","   00000   ","           "],info:{a:"In each room, you need to CAPTURE all of the\nnumbers, then get to the exit.",b:"To capture a number, first build up a charge\nequal to it, then touch it."}}]},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=function(t){function e(){var e=t.call(this,u.default,u.default.width/2,0,"transition")||this;return u.default.stage.addChild(e),e.anchor.set(.5,0),e.falling=!1,e.newState="menu",e}return o(e,t),e.prototype.update=function(){this.falling?(this.y=Math.min(0,this.y+2.5*u.default.time.elapsedMS),this.y>=0&&(u.default.state.start(this.newState),this.falling=!1,u.default.sfx.swoosh.play())):this.y+=2.5*u.default.time.elapsedMS},e.prototype.raise=function(){this.y=u.default.height,this.angle=180},e.prototype.transition=function(t){this.newState=t,this.falling=!0,this.y=-1e3,this.angle=0},e}(Phaser.Image);e.Curtain=i},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=function(t){function e(){var e=t.call(this,u.default,100,u.default.height,"info-box")||this;return u.default.stage.addChild(e),e.text=u.default.make.bitmapText(e.x+40,e.y+30,"handwriting","",70),u.default.stage.addChild(e.text),e.targetY=e.y,e.undoIcon=u.default.make.image(850,0,"undo"),u.default.stage.addChild(e.undoIcon),e}return o(e,t),e.prototype.update=function(){var t=u.default.time.elapsedMS/1e3;this.y+=10*(this.targetY-this.y)*t,this.text.y=this.y+30,this.undoIcon.y=this.y+32},e.prototype.appear=function(t){-1!==t.indexOf("    ")?this.undoIcon.alpha=1:this.undoIcon.alpha=0,this.text.text=t,this.targetY=450},e.prototype.dismiss=function(){this.targetY=u.default.height},e}(Phaser.Image);e.InfoBox=i},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=a(1),r=a(2),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(){for(var t in localStorage.setItem("dot_dungeons_data",JSON.stringify(u.default.data)),u.default.world.setBounds(0,0,7680,1440),this.graphics=u.default.add.graphics(0,0),u.default.mode="puzzle",u.default.camera.x=u.default.menuX,u.default.camera.y=u.default.menuY,u.default.world1arrows=[new i.MenuArrow(2400,420,2560,0,180,u.default.levels["2-1"].unlocked),new i.MenuArrow(2200,630,1280,720,270,u.default.levels["X-1"].unlocked)],u.default.world2arrows=[new i.MenuArrow(3700,290,3840,0,180,u.default.levels["3-1"].unlocked),new i.MenuArrow(3450,580,2560,720,270,u.default.levels["Y-1"].unlocked)],u.default.world3arrow=new i.MenuArrow(4970,450,3840,720,270,u.default.levels["Z-1"].unlocked),u.default.levels){var e=new i.LevelButton(t);u.default.levels[t].button=e}this.scenery=[u.default.add.image(350,50,"logo"),u.default.add.image(0,720,"credits-page"),u.default.add.image(1280,0,"world1"),new r.Number(1890,90,"1"),u.default.add.image(1280,720,"worldx"),u.default.add.image(2560,0,"world2"),new r.Number(3250,90,"2"),u.default.add.image(2560,720,"worldy"),u.default.add.image(3840,0,"world3"),new r.Number(4250,90,"3"),u.default.add.image(3840,720,"worldz")],this.buttons=[new i.MenuButton(200,400,"endless-dungeon",(function(){u.default.mode="random",u.default.room=1,u.default.onesCaptured=0,u.default.twosCaptured=0,u.default.threesCaptured=0,u.default.curtain.transition("main")}),this),new i.MenuButton(1100,400,"puzzles",(function(){u.default.menuX=1280}),this),new i.MenuButton(650,400,"how-to-play",(function(){u.default.mode="tutorial",u.default.room=0,u.default.curtain.transition("main")}),this),new i.MenuButton(650,610,"credits",(function(){u.default.menuY=720}),this),new i.MenuButton(160,830,"back",(function(){u.default.menuY=0}),this),new i.MenuArrow(1400,130,0,0,0,!0),new i.MenuArrow(2450,850,1280,0,90,!0),new i.MenuArrow(2680,350,1280,0,0,!0),new i.MenuArrow(3720,850,2560,0,90,!0),new i.MenuArrow(3960,580,2560,0,0,!0),new i.MenuArrow(4650,850,3840,0,90,!0)],this.unlockButton=new i.MenuButton(950,1140,"unlock-everything",(function(){for(var t in u.default.levels)u.default.data.levels[t].unlocked=!0,u.default.levels[t].unlocked=!0;u.default.curtain.transition("menu")}),this),u.default.soundButton.x=1220,u.default.curtain.raise()},e.prototype.update=function(){var t=u.default.time.elapsedMS/1e3;u.default.camera.x+=5*(u.default.menuX-u.default.camera.x)*t,u.default.camera.y+=5*(u.default.menuY-u.default.camera.y)*t;var e=this.graphics;for(var a in e.clear(),e.lineStyle(7,4473924),u.default.levels)for(var n=u.default.levels[a],o=0,i=n.unlocks;o<i.length;o++){var r=i[o],l=u.default.levels[r];l.unlocked&&(e.moveTo(n.button.x,n.button.y),e.lineTo(l.button.x,l.button.y))}},e}(Phaser.State);e.MenuState=l},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=a(3),r=a(16),l=a(17),s=a(1),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(){var t,e=u.default.add.bitmapText(15,0,"handwriting","",80);if("random"===u.default.mode)t=i.buildProceduralMap(u.default.room),e.text="Room "+u.default.room;else if("tutorial"===u.default.mode){if(2===u.default.room)(a=u.default.add.sprite(523,375,"hint-1")).animations.add("swish",[0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33],20,!0),a.animations.play("swish");t=u.default.tutorial[u.default.room],e.text="How to Play"}else if("puzzle"===u.default.mode){var a;if(t=u.default.levels[u.default.currentLevel],e.text=u.default.currentLevel,"2-2"===u.default.currentLevel)(a=u.default.add.sprite(523,375,"hint-2")).animations.add("swish",[0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],20,!0),a.animations.play("swish")}var n=i.buildLevelMap(t);this.graphics=u.default.add.graphics(0,0),this.numburst=u.default.add.sprite(0,0,"numburst",6),this.numburst.animations.add("burst",[0,1,2,3,4,5,6],20,!1),this.numburst.anchor.set(.5),this.numburst.scale.set(1),this.ct=new l.ChargeTracker,this.pencil=new r.Pencil(n.startX,n.startY,"random"===u.default.mode);new s.MenuButton(1230,45,"exit",(function(){u.default.infoBox.dismiss(),"random"===u.default.mode?u.default.curtain.transition("results"):u.default.curtain.transition("menu")}),this);if("random"!==u.default.mode)new s.MenuButton(1150,45,"undo",this.undo,this);u.default.soundButton.x=1060,this.path=[{x:n.startX,y:n.startY,cleared:!1,visited:!0,finished:!1,charge:0}],this.exit=n[n.endY][n.endX],n[n.startY][n.startX].markVisited(),this.map=n,this.calculateValidMoves(),n[n.startY][n.startX].hasInfo&&u.default.infoBox.appear(n[n.startY][n.startX].info),this.justPaused=!1,u.default.input.activePointer.leftButton.onDown.add(this.movePencil,this),u.default.curtain.raise()},e.prototype.paused=function(){this.justPaused=!0},e.prototype.movePencil=function(){if("menu"!==u.default.state.current&&"results"!==u.default.state.current&&this.validMoves.length&&!(u.default.input.y<100))if(this.justPaused)this.justPaused=!1;else{u.default.sfx.pen.play();var t=this.pencil,e=this.map;t.pos.x=t.next.x,t.pos.y=t.next.y,t.x=i.realX(t.pos.x),t.y=i.realY(t.pos.y);var a=e[t.pos.y][t.pos.x],n={x:t.pos.x,y:t.pos.y,cleared:!1,visited:!1,finished:!1,charge:null};if(a.hasInfo?u.default.infoBox.appear(a.info):u.default.infoBox.dismiss(),a.hasNumber&&this.ct.charge===a.number.value&&("random"===u.default.mode&&(1===a.number.value?u.default.onesCaptured++:2===a.number.value?u.default.twosCaptured++:3===a.number.value&&u.default.threesCaptured++),e.remaining-=1,this.numburst.x=a.number.x,this.numburst.y=a.number.y,this.numburst.animations.play("burst"),a.defeatNumber(),n.cleared=!0),a.visited?0===u.default.room&&"tutorial"===u.default.mode||this.ct.gainCharge():(a.hasInfo&&!a.everVisited&&(e.remaining-=1),this.ct.loseCharge(),a.markVisited(),n.visited=!0),e.remaining<=0&&(this.exit.unlock(),n.finished=!0),n.charge=this.ct.charge,this.path.push(n),this.calculateValidMoves(),t.pos.x===e.endX&&t.pos.y===e.endY)if(this.validMoves=[],"random"===u.default.mode)u.default.room++,u.default.curtain.transition("main");else if("tutorial"===u.default.mode)u.default.room++,u.default.room>=u.default.tutorial.length?u.default.curtain.transition("menu"):u.default.curtain.transition("main");else{u.default.levels[u.default.currentLevel].completed||(u.default.justCompleted=u.default.currentLevel),u.default.data.levels[u.default.currentLevel].completed=!0;for(var o=0,r=u.default.levels[u.default.currentLevel].unlocks;o<r.length;o++){var l=r[o];u.default.data.levels[l].unlocked=!0}u.default.curtain.transition("menu")}}},e.prototype.calculateValidMoves=function(){var t=this.pencil,e=this.path;this.validMoves=[];for(var a=-1;a<2;a++)for(var n=-1;n<2;n++)if((0!==a||0!==n)&&null!==this.map[t.pos.y+n][t.pos.x+a]&&!this.map[t.pos.y+n][t.pos.x+a].locked){for(var o=!0,i=0;i<this.path.length-1;i++){if(e[i].x===t.pos.x&&e[i].y===t.pos.y&&e[i+1].x===t.pos.x+a&&e[i+1].y===t.pos.y+n){o=!1;break}if(e[i].x===t.pos.x+a&&e[i].y===t.pos.y+n&&e[i+1].x===t.pos.x&&e[i+1].y===t.pos.y){o=!1;break}}o&&this.validMoves.push({x:a,y:n})}0===this.validMoves.length&&"random"===u.default.mode&&u.default.curtain.transition("results")},e.prototype.update=function(){for(var t=this.pencil,e=Number.POSITIVE_INFINITY,a=0,n=this.validMoves;a<n.length;a++){var o=n[a],r=Phaser.Math.distance(u.default.input.activePointer.x,u.default.input.activePointer.y,i.realX(t.pos.x+o.x),i.realY(t.pos.y+o.y));r<e&&(t.next.x=t.pos.x+o.x,t.next.y=t.pos.y+o.y,e=r)}var l=this.graphics,s=this.path;l.clear(),l.lineStyle(9,4473924),l.moveTo(i.realX(s[0].x),i.realY(s[0].y));for(var d=1;d<s.length;d++)l.lineTo(i.realX(s[d].x),i.realY(s[d].y));u.default.input.activePointer.y>100&&(l.lineStyle(8,4473924,.15),l.lineTo(i.realX(t.next.x),i.realY(t.next.y)))},e.prototype.undo=function(){if(!(this.path.length<=1)){var t=this.path.pop(),e=this.path[this.path.length-1],a=this.pencil;a.pos.x=e.x,a.pos.y=e.y,a.x=i.realX(e.x),a.y=i.realY(e.y),this.ct.setCharge(e.charge),t.cleared&&(this.map[t.y][t.x].reviveNumber(),this.map.remaining++,t.finished&&this.exit.lock()),t.visited&&this.map[t.y][t.x].unmarkVisited(),this.map[e.y][e.x].hasInfo?u.default.infoBox.appear(this.map[e.y][e.x].info):u.default.infoBox.dismiss(),this.calculateValidMoves()}},e}(Phaser.State);e.MainState=d},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=a(3),r=function(t){function e(e,a,n){var o=this;return o=n?t.call(this,u.default,i.realX(e),i.realY(a),"pen")||this:t.call(this,u.default,i.realX(e),i.realY(a),"pencil")||this,u.default.add.existing(o),o.anchor.set(0,1),o.alpha=.5,o.charge=0,o.pos={x:e,y:a},o.next={x:e,y:a},o}return o(e,t),e}(Phaser.Image);e.Pencil=r},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=function(t){function e(){var e=t.call(this,u.default,u.default.width/2,80,"starburst",15)||this;return u.default.add.existing(e),e.charge=0,e.number=u.default.add.sprite(e.x,e.y,"charge",5),e.numberCopy=u.default.add.sprite(e.x,e.y,"charge",5),e.number.anchor.set(.5),e.number.scale.set(0),e.numberCopy.anchor.set(.5),e.animations.add("appear",[14,13,12,11,10,9,8,7,6,5],30,!1),e.animations.add("disappear",[6,7,8,9,10,11,12,13,14,15],30,!1),e.animations.add("pulse",[0,1,2,3,4,5],20,!1),e.anchor.set(.5),e}return o(e,t),e.prototype.loseCharge=function(){this.charge>0&&(this.charge=0,this.animations.play("disappear"),u.default.add.tween(this.number.scale).to({x:0,y:0},250).start())},e.prototype.gainCharge=function(){0===this.charge?(this.animations.play("appear"),u.default.add.tween(this.number.scale).to({x:1,y:1},250).start()):this.animations.play("pulse"),this.charge++,this.charge>5&&(this.charge=5),this.number.frame=this.charge-1,u.default.sfx.charge[this.charge-1].play()},e.prototype.setCharge=function(t){t>5&&(t=5),this.charge=t,0===t?(this.number.scale.set(0),this.frame=15):(this.number.scale.set(1),this.frame=5,this.number.frame=t-1)},e.prototype.update=function(){var t=u.default.time.elapsedMS/1e3;this.rotation+=t,this.number.rotation=Math.sin(u.default.time.now/300)/8},e}(Phaser.Sprite);e.ChargeTracker=i},function(t,e,a){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});e.__esModule=!0;var u=a(0),i=a(1),r=a(2),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.create=function(){var t=u.default.room-1;u.default.add.bitmapText(420,50,"handwriting","Rooms cleared: ",80),u.default.add.bitmapText(860,50,"handwriting",t+"",80).anchor.set(1,0),t>u.default.data.highScore?(u.default.data.highScore=t,this.highScoreText=u.default.add.bitmapText(640,180,"handwriting","Personal best!",80),this.highScoreText.anchor.set(.5,.5),this.newHighScore=!0):(u.default.add.bitmapText(420,125,"handwriting","Your best: ",80),u.default.add.bitmapText(860,125,"handwriting",u.default.data.highScore+"",80).anchor.set(1,0),this.newHighScore=!1),u.default.add.bitmapText(640,300,"handwriting","Numbers captured:",80).anchor.set(.5,0),new r.Number(300,450,"1"),new r.Number(600,450,"2"),new r.Number(900,450,"3"),u.default.add.bitmapText(340,415,"handwriting","x "+u.default.onesCaptured,80),u.default.add.bitmapText(640,415,"handwriting","x "+u.default.twosCaptured,80),u.default.add.bitmapText(940,415,"handwriting","x "+u.default.threesCaptured,80),new i.MenuButton(460,600,"retry",(function(){u.default.mode="random",u.default.room=1,u.default.onesCaptured=0,u.default.twosCaptured=0,u.default.threesCaptured=0,u.default.curtain.transition("main")}),this),new i.MenuButton(760,605,"main-menu",(function(){u.default.curtain.transition("menu")}),this),u.default.soundButton.x=1220,u.default.curtain.raise()},e.prototype.update=function(){if(this.newHighScore){this.highScoreText.scale.x;this.highScoreText.scale.set(1+.2*Math.sin(.005*u.default.time.now),null)}},e}(Phaser.State);e.ResultsState=l}]);