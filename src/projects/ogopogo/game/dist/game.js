!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=5)}([function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0,t.isPalindrome=function(e){for(var t=0,s=e.length-1,i=!0;t<s;){if(e[t].color!==e[s].color){i=!1;break}t++,s--}return i},t.calcScore=function(e){for(var t=1,s=e[0].color,i=0,n=e;i<n.length;i++){var o=n[i];o.color!==s&&(t++,s=o.color)}return e.length*t};var o=function(e){function t(t,s,i,n,o,a,r,h){var u=e.call(this,t,s,i,n,a)||this;return t.add.existing(u),u.disabledFrame=o,u.enabledFrame=a,u.downFrame=r,u.onDownCallback=h,u.enabled=!0,u.down=!1,u.setInteractive(),u.on(Phaser.Input.Events.POINTER_DOWN,u.onDown,u),u.on(Phaser.Input.Events.POINTER_OUT,u.onOut,u),u.on(Phaser.Input.Events.POINTER_UP,u.onUp,u),u}return n(t,e),t.prototype.onOut=function(){this.enabled&&this.setFrame(this.enabledFrame),this.down=!1},t.prototype.onUp=function(){this.enabled&&(this.scene.background.playSound("clickUp"),this.setFrame(this.enabledFrame),this.down&&this.onDownCallback())},t.prototype.onDown=function(){this.enabled&&(this.scene.background.playSound("clickDown"),this.setFrame(this.downFrame),this.down=!0)},t.prototype.setEnabled=function(e){this.enabled=e,e?this.setFrame(this.enabledFrame):this.setFrame(this.disabledFrame)},t}(Phaser.GameObjects.Sprite);t.Button=o;var a=function(e){function t(t,s,i,n,o,a,r,h,u,c){var l=e.call(this,t,s,i,n,o)||this;return t.add.existing(l),l.offFrame=o,l.offDownFrame=a,l.onFrame=r,l.onDownFrame=h,l.onDownCallback=c,l.down=!1,l.isOn=u,l.setFrame(u?r:o),l.setInteractive(),l.on(Phaser.Input.Events.POINTER_DOWN,l.onDown,l),l.on(Phaser.Input.Events.POINTER_OUT,l.onOut,l),l.on(Phaser.Input.Events.POINTER_UP,l.onUp,l),l}return n(t,e),t.prototype.onOut=function(){this.isOn?this.setFrame(this.onFrame):this.setFrame(this.offFrame),this.down=!1},t.prototype.onUp=function(){this.isOn?this.setFrame(this.onFrame):this.setFrame(this.offFrame),this.down&&(this.isOn=!this.isOn,this.isOn?this.setFrame(this.onFrame):this.setFrame(this.offFrame),this.scene.background.playSound("clickUp"),this.onDownCallback())},t.prototype.onDown=function(){this.isOn?this.setFrame(this.onDownFrame):this.setFrame(this.offDownFrame),this.down=!0,this.scene.background.playSound("clickDown")},t}(Phaser.GameObjects.Sprite);t.ToggleButton=a;var r=function(e){function t(t){var s=e.call(this,t)||this;return window.addEventListener("resize",s.onResize.bind(s)),s}return n(t,e),t.prototype.dunkUI=function(){this.background.playSound("sploosh"),this.ui.setY(-2560*this.ui.scaleY),this.tweens.add({targets:this.ui,props:{y:0},duration:1e3,easeParams:[.5,1.3],ease:Phaser.Math.Easing.Elastic.Out}),this.background.createSurfaceBubbles()},t.prototype.changeTo=function(e){var t=this;this.tweens.add({targets:this.ui,props:{y:-1280*this.ui.scaleY},duration:800,easeParams:[.5,1.3],ease:Phaser.Math.Easing.Elastic.In,onComplete:function(){t.scene.start(e)},onCompleteScope:this})},t.prototype.create=function(){this.background=this.scene.get("background"),this.ui=this.add.container(0,0),this.foreground=this.add.container(0,0),this.foreground.setVisible(!1),this.pauseBackground=this.add.rectangle(0,0,1,1),this.pauseBackground.setAlpha(.85),this.pauseBackground.setOrigin(.5,0),this.foreground.add(this.pauseBackground),this.onResize()},t.prototype.onResize=function(){var e=window.devicePixelRatio||1,t=window.innerHeight*e,s=window.innerWidth*e;1===this.registry.get("dimensions")&&(s=(t=Math.min(t,s*(16/9)))*(9/16));var i=t/1280;i=Math.min(i,s/720),this.ui&&(this.ui.setScale(i),this.ui.setX(s/2)),this.foreground&&(this.foreground.setScale(i),this.foreground.setX(s/2),this.pauseBackground.setScale(window.innerWidth*s,window.innerHeight*t))},t.prototype.update=function(e,t){this.pauseBackground.setFillStyle(this.background.cameras.main.backgroundColor.color)},t}(Phaser.Scene);t.FlexScene=r;var h=function(e){function t(t){var s=e.call(this,t)||this;return window.addEventListener("resize",s.onResize.bind(s)),s}return n(t,e),t.prototype.create=function(){this.ui=this.add.container(0,0),this.onResize()},t.prototype.onResize=function(){var e=window.devicePixelRatio||1,t=window.innerHeight*e,s=window.innerWidth*e,i=t/1280;i=Math.min(i,s/720),this.ui.setScale(i),this.ui.setX(s/2),this.ui.setY(t/2)},t}(Phaser.Scene);t.CenteredScene=h;var u=function(e){function t(t,s,i,n){var o=e.call(this,t,s,i)||this;o.page=0;for(var a=0;a<n.length;a++){if(a>0)for(var r=0,h=n[a];r<h.length;r++){var u=h[r];u.setAlpha(0),u.setX(400)}o.add(n[a])}return o.pages=n,o}return n(t,e),t.prototype.changePage=function(e){for(var t=0;t<this.pages[this.page].length;t++)this.scene.tweens.add({targets:this.pages[this.page][t],props:{alpha:0,x:e>0?-400:400},delay:50*t,duration:400,ease:Phaser.Math.Easing.Cubic.InOut});this.page+=e;for(t=0;t<this.pages[this.page].length;t++)this.scene.tweens.add({targets:this.pages[this.page][t],props:{alpha:1,x:0},delay:50*t,duration:400,ease:Phaser.Math.Easing.Cubic.InOut})},t}(Phaser.GameObjects.Container);t.PageInterface=u},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=s(0),a=["plain","colorblind"],r=function(e){function t(t,s,i,n,a,r){var u=e.call(this,t,s,i,"menu-button",0,0,1,null)||this;return u.onDownCallback=u.toggleMenu.bind(u),u.onToggleMenu=r,u.pauseMenu=new Phaser.GameObjects.Container(t,0,0,n),t.foreground.add(u.pauseMenu),t.foreground.add(new o.Button(t,s,i,"x-button",0,0,1,u.toggleMenu.bind(u))),u.optionsMenu=new h(t,0,40,[new o.Button(t,0,1030,"back-button",0,0,1,u.toggleOptions.bind(u))],a),u.optionsMenu.setVisible(!1),t.foreground.add(u.optionsMenu),u}return n(t,e),t.prototype.toggleMenu=function(){this.scene.foreground.setVisible(!this.scene.foreground.visible),this.setVisible(!this.scene.foreground.visible),this.onToggleMenu(this.scene.foreground.visible),this.pauseMenu.setVisible(!0),this.optionsMenu.setVisible(!1)},t.prototype.toggleOptions=function(){this.pauseMenu.setVisible(!this.pauseMenu.visible),this.optionsMenu.setVisible(!this.pauseMenu.visible)},t}(o.Button);t.PauseButton=r;var h=function(e){function t(t,s,i,n,r){var h=e.call(this,t,s,i)||this,u=new Phaser.GameObjects.BitmapText(t,0,160,"info","volume",48,1);u.setOrigin(.5,0),h.add(u),h.volumeInteger=Math.floor(5*h.scene.background.sound.volume),h.volumeDownButton=new o.Button(t,-270,225,"minus-button",0,1,2,h.volumeDown.bind(h)),h.volumeDownButton.setEnabled(h.volumeInteger>0),h.add(h.volumeDownButton),h.volumeUpButton=new o.Button(t,270,225,"plus-button",0,1,2,h.volumeUp.bind(h)),h.volumeUpButton.setEnabled(h.volumeInteger<10),h.add(h.volumeUpButton),h.musicButton=new o.ToggleButton(t,-230,350,"music-button",0,1,2,3,h.scene.background.musicOn,h.toggleMusic.bind(h)),h.add(h.musicButton),h.soundsButton=new o.ToggleButton(t,-40,350,"sounds-button",0,1,2,3,h.scene.background.soundsOn,h.toggleSounds.bind(h)),h.add(h.soundsButton),h.ambianceButton=new o.ToggleButton(t,190,350,"ambiance-button",0,1,2,3,h.scene.background.ambianceOn,h.toggleAmbiance.bind(h)),h.add(h.ambianceButton);var c=new Phaser.GameObjects.Image(t,-192,219,"volume-meter");c.setOrigin(0,0),h.add(c),h.volumeMeterInside=new Phaser.GameObjects.Image(t,-188,223,"volume-meter-inside"),h.volumeMeterInside.setScale(h.volumeInteger/10,1),h.volumeMeterInside.setOrigin(0,0),h.add(h.volumeMeterInside);var l=new Phaser.GameObjects.BitmapText(t,0,470,"info","block style",48,1);l.setOrigin(.5,0),h.add(l),h.blockStyleIndex=a.indexOf(h.scene.registry.get("blockStyle"));var d=new o.Button(t,-270,580,"arrow-button",0,1,2,h.nextBlockStyle.bind(h));d.setScale(-1,1),h.add(d);var p=new o.Button(t,270,580,"arrow-button",0,1,2,h.nextBlockStyle.bind(h));h.add(p),h.exampleBlocks=[new Phaser.GameObjects.Image(t,-100,580,"squares-"+a[h.blockStyleIndex],0),new Phaser.GameObjects.Image(t,0,580,"squares-"+a[h.blockStyleIndex],1),new Phaser.GameObjects.Image(t,100,580,"squares-"+a[h.blockStyleIndex],2)],h.add(h.exampleBlocks),h.onBlockStyleChanged=r;var g=new Phaser.GameObjects.BitmapText(t,0,710,"info","game dimensions",48,1);g.setOrigin(.5,0),h.add(g);var m=new Phaser.GameObjects.BitmapText(t,0,760,"info","(changing this can improve performance)",40,1);return m.setOrigin(.5,0),h.add(m),h.fitToScreenButton=new o.Button(t,-90,850,"fit-to-screen-button",2,0,1,h.fitToScreen.bind(h)),h.nineBySixteenButton=new o.Button(t,130,850,"9-by-16-button",2,0,1,h.nineBySixteen.bind(h)),1===h.scene.registry.get("dimensions")?h.nineBySixteenButton.setEnabled(!1):h.fitToScreenButton.setEnabled(!1),h.add(h.fitToScreenButton),h.add(h.nineBySixteenButton),n&&h.add(n),h}return n(t,e),t.prototype.fitToScreen=function(){this.scene.registry.set("dimensions",0),this.scene.onResize(),this.scene.background.onResize(),this.nineBySixteenButton.setEnabled(!0),this.fitToScreenButton.setEnabled(!1)},t.prototype.nineBySixteen=function(){this.scene.registry.set("dimensions",1),this.scene.onResize(),this.scene.background.onResize(),this.fitToScreenButton.setEnabled(!0),this.nineBySixteenButton.setEnabled(!1)},t.prototype.volumeUp=function(){this.volumeInteger=Math.min(this.volumeInteger+1,10),this.scene.background.sound.volume=this.volumeInteger/5,this.volumeMeterInside.setScale(this.volumeInteger/10,1),2===this.scene.background.sound.volume&&this.volumeUpButton.setEnabled(!1),this.scene.registry.set("volume",this.scene.background.sound.volume),this.volumeDownButton.setEnabled(!0)},t.prototype.volumeDown=function(){this.volumeInteger=Math.min(this.volumeInteger-1,10),this.scene.background.sound.volume=this.volumeInteger/5,this.volumeMeterInside.setScale(this.volumeInteger/10,1),0===this.scene.background.sound.volume&&this.volumeDownButton.setEnabled(!1),this.scene.registry.set("volume",this.scene.background.sound.volume),this.volumeUpButton.setEnabled(!0)},t.prototype.nextBlockStyle=function(){this.blockStyleIndex=(this.blockStyleIndex+1)%a.length;for(var e=0;e<3;e++)this.exampleBlocks[e].setTexture("squares-"+a[this.blockStyleIndex],e);this.scene.registry.set("blockStyle",a[this.blockStyleIndex]),this.onBlockStyleChanged&&this.onBlockStyleChanged()},t.prototype.prevBlockStyle=function(){this.blockStyleIndex=(this.blockStyleIndex-1)%a.length;for(var e=0;e<3;e++)this.exampleBlocks[e].setTexture("squares-"+a[this.blockStyleIndex],e);this.scene.registry.set("blockStyle",a[this.blockStyleIndex]),this.onBlockStyleChanged&&this.onBlockStyleChanged()},t.prototype.toggleMusic=function(){this.scene.background.toggleMusic()},t.prototype.toggleSounds=function(){this.scene.background.toggleSounds()},t.prototype.toggleAmbiance=function(){this.scene.background.toggleAmbiance()},t}(Phaser.GameObjects.Container);t.OptionsMenu=h;var u=function(e){function t(){return e.call(this,"options")||this}return n(t,e),t.prototype.create=function(){e.prototype.create.call(this),this.ui.add(new o.Button(this,0,1150,"back-button",0,0,1,this.back.bind(this))),this.ui.add(new h(this,0,0,[new o.Button(this,0,1010,"replay-tutorial-button",0,0,1,this.startTutorial.bind(this))])),this.dunkUI()},t.prototype.startTutorial=function(){this.changeTo("tutorial")},t.prototype.back=function(){this.changeTo("menu")},t.prototype.update=function(t,s){e.prototype.update.call(this,t,s)},t}(o.FlexScene);t.OptionsScene=u},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=s(3),a=s(6),r=s(7),h=s(0),u=s(4),c=s(1),l=["","Tip: before popping a palindrome,\ncheck to see if it could be made\neven longer.","Tip: when the container overflows,\nfloating squares can be popped for\n1 point each.","Tip: the more times the color\nchanges within a palindrome,\nthe more points it's worth.","Tip: to earn Bonus Rows, make\npalindromes worth 99 or more\npoints.","Tip: try building palindromes from\nthe middle out."],d=function(e){function t(){return e.call(this,"main")||this}return n(t,e),t.prototype.create=function(){e.prototype.create.call(this),this.paused=!1,this.finished=!1,this.bonusRowButton=new h.Button(this,238,1113,"row-button",0,1,2,this.addBonusRows.bind(this)),this.ui.add(this.bonusRowButton),this.bonusRowText=this.add.bitmapText(238,1107,"score","",40,.5),this.bonusRowText.setOrigin(.5),this.ui.add(this.bonusRowText),this.bonusRowPlus=this.add.sprite(280,1070,"plus",0),this.highScoreSelected=!1,this.ui.add(this.bonusRowPlus),this.squarea=new o.Squarea(this,-265,240,10,4),this.squarea.onSelectionUpdate=this.onSelectionUpdate.bind(this),this.squarea.onPop=this.onPop.bind(this),this.ui.add(this.squarea);var t=this.add.image(-275,230,"container");t.setOrigin(0,0),this.ui.add(t),this.scoreBar=new a.ScoreBar(this,238,230,30,this.onGoalReached.bind(this)),this.ui.add(this.scoreBar),this.preview=new r.ScorePreview(this,0,1200),this.ui.add(this.preview),this.gameOverText=this.add.image(-85,380,"game-over"),this.ui.add(this.gameOverText),this.gameOverText.setAlpha(0),this.endScoreText=this.add.bitmapText(-85,460,"info","123 points",48),this.endScoreText.setOrigin(.5),this.endScoreText.setAlpha(0),this.ui.add(this.endScoreText),this.tipText=this.add.bitmapText(-275,60,"info","",36),this.tipText.setAlpha(0),this.ui.add(this.tipText),this.playAgainButton=new h.Button(this,-85,890,"play-again-button",0,0,1,this.playAgain.bind(this)),this.ui.add(this.playAgainButton),this.playAgainButton.setAlpha(0),this.endGameButton=new h.Button(this,-85,530,"end-game-button",0,0,1,this.endGame.bind(this)),this.ui.add(this.endGameButton),this.endGameButton.setAlpha(0),this.exitButton=new h.Button(this,-85,1e3,"main-menu-button",0,0,1,this.exit.bind(this)),this.ui.add(this.exitButton),this.exitButton.setAlpha(0),this.undoButton=new h.Button(this,0,400,"undo-button",0,1,2,this.undo.bind(this)),this.undoButton.setEnabled(!1),this.pauseButton=new c.PauseButton(this,238,97,[new h.Button(this,0,700,"save-and-exit-button",0,0,1,this.exit.bind(this)),new h.Button(this,0,850,"end-game-button",0,0,1,this.endGame.bind(this)),this.undoButton],this.squarea.updateBlockStyles.bind(this.squarea),this.setPaused.bind(this)),this.pauseButton.pauseMenu.add(new h.Button(this,0,550,"options-text-button",0,0,1,this.pauseButton.toggleOptions.bind(this.pauseButton))),this.ui.add(this.pauseButton),this.achievementBlock=new u.AchievementBlock(this,0,-215,"","",!1),this.ui.add(this.achievementBlock),this.achievementStack=[],this.achieving=!1;var s=this.registry.get("gameInProgress")||null;s?(this.level=s.level,this.background.setColor(s.level-1),this.scoreBar.setScore(s.score,!0),this.scoreBar.setLevel(s.level),this.bonusRows=s.bonusRows,this.bonusRowButton.setEnabled(s.bonusRows>0),this.bonusRowText.setText(s.bonusRows>0?String(s.bonusRows):""),this.squarea.setSquares(s.squares),this.moves=s.moves,this.fiveStreak=s.fiveStreak,this.timeStarted=s.timeStarted,this.usedBonus=s.usedBonus,this.freePopped=s.freePopped):(this.background.setColor(0),this.level=1,this.bonusRows=0,this.bonusRowButton.setEnabled(!1),this.squarea.refill(32,!0),this.moves=0,this.fiveStreak=0,this.timeStarted=(new Date).valueOf(),this.usedBonus=!1,this.freePopped=0,this.registry.set("gamesPlayed",this.registry.values.gamesPlayed+1),this.saveGame()),this.currentSquares=this.squarea.getSquares(),this.prevSquares=this.currentSquares,this.prevScore=this.scoreBar.score,this.prevBonusRows=this.bonusRows,this.dunkUI(),this.background.stopMenuMusic(),this.background.inMenu=!1},t.prototype.undo=function(){this.squarea.setSquares(this.prevSquares),this.scoreBar.setScore(this.prevScore,!0),this.setBonusRows(this.prevBonusRows),this.undoButton.setEnabled(!1),this.pauseButton.toggleMenu(),this.currentSquares=this.prevSquares,this.saveGame()},t.prototype.setPaused=function(e){this.paused=e,this.squarea.enabled=!e},t.prototype.addBonusRows=function(){this.bonusRowButton.anims.stop(),this.finished||this.squarea.rising||(this.undoButton.setEnabled(!1),this.squarea.addRows(this.bonusRows),this.setBonusRows(0),this.background.createButtonRipple(this.bonusRowButton.x,this.bonusRowButton.y),this.background.playSound("bonusRow"),this.currentSquares=this.squarea.getSquares(),this.saveGame())},t.prototype.setBonusRows=function(e){e>0?(this.bonusRows=e,this.bonusRowText.setText(String(this.bonusRows)),this.bonusRowButton.setEnabled(!0)):(this.bonusRows=0,this.bonusRowText.setText(""),this.bonusRowButton.setEnabled(!1))},t.prototype.playAgain=function(){this.changeTo("main")},t.prototype.exit=function(){this.paused&&this.pauseButton.toggleMenu(),this.changeTo("menu")},t.prototype.onSelectionUpdate=function(e){e.length>this.preview.squares.length&&this.preview.addColor(e[e.length-1].color),e.length<this.preview.squares.length&&this.preview.popColor();var t=h.calcScore(e);this.preview.text.setText(String(t)),this.bonusRows<10&&t>=99&&h.isPalindrome(e)?this.highScoreSelected||(this.bonusRowPlus.anims.play("plus-appear"),this.highScoreSelected=!0):this.highScoreSelected&&(this.bonusRowPlus.anims.play("plus-vanish"),this.highScoreSelected=!1)},t.prototype.onPop=function(e,t){if(this.preview.clear(),this.highScoreSelected&&(this.bonusRowPlus.anims.play("plus-vanish"),this.highScoreSelected=!1),t){this.prevSquares=this.currentSquares,this.currentSquares=this.squarea.getSquares(),this.prevScore=this.scoreBar.score,this.prevBonusRows=this.bonusRows;var s=h.calcScore(e);if(s>=99){var i=1;s>=299&&i++,s>=499&&i++,this.setBonusRows(Math.min(this.bonusRows+i,10)),this.bonusRowButton.anims.play("bonus-row-added")}if(this.scoreBar.setScore(this.scoreBar.score+=s),this.scoreBar.score<this.scoreBar.scoreGoal?(this.saveGame(),this.undoButton.setEnabled(!0)):this.undoButton.setEnabled(!1),0===this.bonusRows&&0===this.squarea.numSquares&&this.scoreBar.score<this.scoreBar.scoreGoal?this.endGame():Math.pow(this.squarea.numSquares,2)<this.scoreBar.scoreGoal-this.scoreBar.score&&(this.bonusRows>0?this.bonusRowButton.anims.play("bonus-row-reminder"):this.tweens.add({targets:this.endGameButton,props:{alpha:1},duration:1e3})),this.moves++,s>=99&&this.achieve(4),e.length>=18&&this.achieve(12),e.length>=5?(this.fiveStreak++,5===this.fiveStreak&&this.achieve(3)):this.fiveStreak=0,e.length>=7){for(var n={0:!1,1:!1,2:!1,3:!1,4:!1},o=0,a=-1,r=!1,u=10,c=0,l=[0,1,0,2,0,1,0],d=0,p=0,g=e;p<g.length;p++){var m=g[p];n[m.color]||(n[m.color]=!0,o++),m.color===l[d]&&d++,m.color===a&&(r=!0),a=m.color,u=Math.min(u,m.row),c=Math.max(c,m.row)}e.length>=12&&1===o&&this.achieve(7),5===o&&this.achieve(8),7===e.length&&7===d&&this.achieve(10),16===e.length&&c-u==3&&this.achieve(15),c-u==9&&this.achieve(16),e.length>=9&&!r&&2===o&&this.achieve(6)}for(var f=0,b=this.registry.get("mvps"),v=0,y=b;v<y.length;v++){y[v].score>=s&&f++}f<=6&&this.registry.set("mvps",b.slice(0,f).concat([{score:s,date:(new Date).toISOString().substring(0,10),squares:e.map((function(e){return e.color}))}]).concat(b.slice(f,6)))}},t.prototype.saveGame=function(){this.registry.set("gameInProgress",{level:this.level,bonusRows:this.bonusRows,squares:this.squarea.getSquares(),score:this.scoreBar.score,moves:this.moves,fiveStreak:this.fiveStreak,timeStarted:this.timeStarted})},t.prototype.achieve=function(e){this.registry.values.achievements[e]||(this.registry.values.achievements[e]=!0,this.registry.set("achievements",this.registry.values.achievements),this.achievementStack.push(e),this.achieving||(this.achieving=!0,this.nextAchievement()))},t.prototype.nextAchievement=function(){if(0===this.achievementStack.length)this.achieving=!1;else{var e=this.achievementStack.pop();this.achievementBlock.setText(u.ACHIEVEMENTS[e].name,u.ACHIEVEMENTS[e].criterion),this.achievementBlock.unachieve(),this.tweens.add({targets:this.achievementBlock,props:{y:115},duration:1e3,easeParams:[.5,1.3],ease:Phaser.Math.Easing.Elastic.Out}),this.time.addEvent({callback:this.achievementBlock.achieve,callbackScope:this.achievementBlock,delay:1e3}),this.tweens.add({targets:this.achievementBlock,props:{y:-215},duration:1e3,delay:3e3,easeParams:[.5,1.3],ease:Phaser.Math.Easing.Elastic.In,onComplete:this.nextAchievement,onCompleteScope:this})}},t.prototype.endGame=function(){if(this.undoButton.setEnabled(!1),this.paused&&this.pauseButton.toggleMenu(),!this.finished){this.achieve(0),this.scoreBar.score===this.scoreBar.scoreGoal-1&&this.achieve(11),this.finished=!0,this.tweens.killTweensOf(this.endGameButton),this.endGameButton.setAlpha(0),this.scoreBar.setScore(this.scoreBar.score+this.squarea.numSquares),this.squarea.popAll(),this.endScoreText.setText(this.scoreBar.score+" points"),this.registry.set("gameInProgress",!1);for(var e=0,t=this.registry.get("scores"),s=0,i=t;s<i.length;s++){i[s].score>=this.scoreBar.score&&e++}e<=6&&this.registry.set("scores",t.slice(0,e).concat([{score:this.scoreBar.score,date:(new Date).toISOString().substring(0,10),level:this.level}]).concat(t.slice(e,6))),this.registry.get("gamesPlayed")<=l.length&&(this.tipText.setText(l[this.registry.get("gamesPlayed")-1]),this.tweens.add({targets:this.tipText,props:{alpha:1},duration:1e3,delay:1e3})),this.tweens.add({targets:this.gameOverText,props:{alpha:1},duration:1e3}),this.tweens.add({targets:this.endScoreText,props:{alpha:1},duration:1e3,delay:1e3}),this.tweens.add({targets:this.playAgainButton,props:{alpha:1},duration:1e3,delay:2e3}),this.tweens.add({targets:this.exitButton,props:{alpha:1},duration:1e3,delay:2e3})}},t.prototype.onGoalReached=function(){this.background.playSound("levelComplete"+((this.level-1)%4+1)),this.level++,this.scoreBar.setLevel(this.level),this.background.setColor(this.level-1),this.background.createMeterBubbles(),this.finished||(this.squarea.refill(this.scoreBar.score>=5e3?34:this.scoreBar.score>=3e3?33:32),this.currentSquares=this.squarea.getSquares(),this.prevSquares=this.currentSquares,this.saveGame()),this.finished||2!==this.level||1!==this.moves||this.achieve(2),6===this.level&&(this.achieve(1),this.background.triggerSighting(0)),10===this.level&&(this.achieve(9),this.background.triggerSighting(1)),6===this.level&&this.moves<=10&&this.achieve(13),14===this.level&&(this.achieve(14),this.background.triggerSighting(2)),10===this.level&&((new Date).valueOf()-this.timeStarted)/1e3<200&&this.achieve(17),14!==this.level||this.usedBonus||this.achieve(18),17===this.level&&(this.achieve(19),this.background.triggerSighting(3))},t.prototype.update=function(t,s){e.prototype.update.call(this,t,s),this.squarea.update(t,s),this.scoreBar.update(t,s)},t}(h.FlexScene);t.MainScene=d},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=s(0),a=s(2);t.SQUARE_SIZE=90;var r=function(e){function t(t,s,i,n,o,a,r){var h=e.call(this,t,i,n)||this;return h.floating=!1,h.vr=0,h.vx=0,h.squarea=s,h.image=t.add.image(0,0,"squares-"+t.registry.get("blockStyle"),r),h.image.setCrop(0,0,0,0),h.add(h.image),h.highlighter=t.add.sprite(0,0,"highlight",8),h.add(h.highlighter),h.vy=0,h.dy=h.y,h.color=r,h.row=a,h.col=o,h.connector=t.add.image(i,n,"connection"),h.connector.setAlpha(0),h.image.on(Phaser.Input.Events.POINTER_DOWN,h.vanish,h),h}return n(t,e),t.prototype.select=function(e){void 0===e&&(e=!1),this.highlighter.anims.play("select"),this.image.setFrame(e?this.color+5:this.color)},t.prototype.darken=function(){this.image.setFrame(this.color)},t.prototype.unselect=function(){this.highlighter.anims.play("unselect"),this.image.setFrame(this.color)},t.prototype.vanish=function(){if(this.highlighter.anims.play("vanish"),this.image.alpha=0,this.connector.alpha=0,this.highlighter.once(Phaser.Animations.Events.SPRITE_ANIMATION_COMPLETE,this.destroy,this),this.scene.background.createBubble(this.squarea.x+this.x,this.squarea.y+this.y),this.floating&&this.scene instanceof a.MainScene){var e=this.scene;e.background.playSound("pop1"+String(this.color)),e.freePopped++,10===e.freePopped&&e.achieve(5),e.scoreBar.setScore(e.scoreBar.score+1)}},t.prototype.update=function(e,t){this.highlighter.update(e,t),this.parentContainer&&this.image.setCrop(0,0,74,940-this.y-this.parentContainer.y),this.y+=this.vy*t,this.floating?(this.setAngle(this.angle+this.vr*t),this.x+=this.vx*t,this.y<-500&&this.destroy()):this.y>=this.dy?(this.y=this.dy,this.vy=0):this.vy=Math.min(10,this.vy+.002*t)},t.prototype.float=function(){this.active&&(this.image.setInteractive(),this.floating=!0,this.vr=(Math.random()-.5)/10,this.vy=-.05-Math.random()/20,this.vx=(Math.random()-.5)/20)},t}(Phaser.GameObjects.Container);t.Square=r;var h=function(e){function s(t,s,i,n,o){var a=e.call(this,t,s,i)||this;a.freeSquares=[],a.selectedSquares=[],a.rising=!1,a.enabled=!0,a.rows=n,a.cols=o,a.background=t.add.container(0,0),a.add(a.background),a.squareLayer=t.add.container(0,0),a.add(a.squareLayer),a.foreground=t.add.container(0,0),a.add(a.foreground),a.squares=[];for(var r=0;r<a.cols;r++){for(var h=[],u=0;u<a.rows;u++)h.push(null);a.squares.push(h)}return a.numSquares=0,t.input.on(Phaser.Input.Events.POINTER_DOWN,a.onDown,a),t.input.on(Phaser.Input.Events.POINTER_UP,a.onUp,a),t.input.on(Phaser.Input.Events.POINTER_MOVE,a.onMove,a),a}return n(s,e),s.prototype.refill=function(e,t){void 0===t&&(t=!1);for(var s=0,i=0;i<this.cols;i++)for(var n=0;n<this.rows;n++)this.squares[i][n]&&s++;var o=0;for(n=0;n<this.rows&&!(s>=e);n++){o++;var a=0;for(i=0;i<this.cols;i++)this.squares[i][n]&&a++;s+=this.cols-a}this.addRows(o,t)},s.prototype.addRows=function(e,s){void 0===s&&(s=!1),this.numSquares+=e*this.cols;for(var i=0;i<this.cols;i++)for(var n=0;n<this.rows;n++){var o=this.squares[i][n];o&&(o.row-=e,o.y-=e*t.SQUARE_SIZE,o.dy=this.rowToY(o.row),this.squares[i][n]=null,o.row>=0?this.squares[i][o.row]=o:(this.freeSquares.push(o),this.numSquares--))}var a=[2*e,2*e,2*e,2*e,2*e];for(i=0;i<this.cols;i++)for(n=this.rows-1;n>this.rows-1-e;n--){var h=void 0;do{h=Math.floor(5*Math.random())}while(0===a[h]);a[h]--,this.squares[i][n]=new r(this.scene,this,this.colToX(i),this.rowToY(n),i,n,h),this.squareLayer.add(this.squares[i][n]),this.background.add(this.squares[i][n].connector),this.squares[i][n].dy=this.rowToY(n)}s||(this.squareLayer.y+=e*t.SQUARE_SIZE,this.rising=!0)},s.prototype.setSquares=function(e){for(var t=0,s=this.freeSquares;t<s.length;t++){s[t].destroy()}for(var i=0;i<e.length;i++)if(null!==e[i]){this.numSquares++;var n=i%this.cols,o=Math.floor(i/this.cols);this.squares[n][o]&&this.squares[n][o].destroy(),this.squares[n][o]=new r(this.scene,this,this.colToX(n),this.rowToY(o),n,o,e[i]),this.squareLayer.add(this.squares[n][o]),this.background.add(this.squares[n][o].connector),this.squares[n][o].dy=this.rowToY(o)}this.collapse()},s.prototype.getSquares=function(){for(var e=[],t=0;t<this.rows;t++)for(var s=0;s<this.cols;s++){var i=this.squares[s][t];i?e.push(i.color):e.push(null)}return e},s.prototype.onDown=function(e){if(this.enabled&&0===this.selectedSquares.length){var t=this.squareAt(e.downX,e.downY);t&&(this.selectedSquares=[t],t.select(!0),this.scene.background.playSound("select"+t.color),this.onSelectionUpdate&&this.onSelectionUpdate(this.selectedSquares))}},s.prototype.onMove=function(e){if(e.isDown&&0!==this.selectedSquares.length){var s=this.squareAt(e.worldX,e.worldY);if(s){var i=this.selectedSquares[this.selectedSquares.length-1];if(this.selectedSquares.includes(s)){if(this.selectedSquares.length>1&&s===this.selectedSquares[this.selectedSquares.length-2]){i.unselect(),i.connector.alpha=0;h=o.isPalindrome(this.selectedSquares);if(this.selectedSquares.pop(),(r=o.isPalindrome(this.selectedSquares))&&!h){for(u=0;u<this.selectedSquares.length;u++)this.selectedSquares[u].select(!0);this.scene.background.playSound("selectp"+String(s.color))}else this.scene.background.playSound("reverse"+s.color);if(h&&!r)for(u=0;u<this.selectedSquares.length;u++)this.selectedSquares[u].darken();this.onSelectionUpdate&&this.onSelectionUpdate.call(this.scene,this.selectedSquares)}}else{var n=s.row===i.row&&(s.col===i.col-1||s.col===i.col+1),a=s.col===i.col&&(s.row===i.row-1||s.row===i.row+1);if(n||a){var r,h=o.isPalindrome(this.selectedSquares);if(this.selectedSquares.push(s),(r=o.isPalindrome(this.selectedSquares))&&!h){for(var u=0;u<this.selectedSquares.length-1;u++)this.selectedSquares[u].select(!0);this.scene.background.playSound("selectp"+String(s.color))}else this.scene.background.playSound("select"+s.color);if(h&&!r)for(var u=0;u<this.selectedSquares.length-1;u++)this.selectedSquares[u].darken();s.select(r),s.connector.x=s.x+(i.col-s.col)*t.SQUARE_SIZE/2,s.connector.y=s.y+(i.row-s.row)*t.SQUARE_SIZE/2,s.connector.alpha=1,this.onSelectionUpdate&&this.onSelectionUpdate.call(this.scene,this.selectedSquares)}}}else{var c=this.localTransform.applyInverse(e.worldX,e.worldY),l=Math.floor(c.x/t.SQUARE_SIZE),d=Math.floor(c.y/t.SQUARE_SIZE);if(l<-1||l>this.cols||d<-1||d>this.rows){for(var p=0,g=this.selectedSquares;p<g.length;p++){var m=g[p];m.unselect(),m.connector.alpha=0}this.onPop&&this.onPop(this.selectedSquares,!1),this.selectedSquares=[]}}}},s.prototype.onUp=function(e){if(0!==this.selectedSquares.length){var t=o.isPalindrome(this.selectedSquares);if(this.requiredLength&&this.selectedSquares.length!==this.requiredLength&&(t=!1),this.requiredPalindrome)if(this.selectedSquares.length===this.requiredPalindrome.length){for(var s=0;s<this.selectedSquares.length;s++)if(this.selectedSquares[s].color!==this.requiredPalindrome[s]){t=!1;break}}else t=!1;if(t){for(var i=0,n=this.selectedSquares;i<n.length;i++){(h=n[i]).vanish(),this.squares[h.col][h.row]=null}1===this.selectedSquares.length?this.scene.background.playSound("pop1"+String(this.selectedSquares[0].color)):this.selectedSquares.length<5?this.scene.background.playSound("popFew"):this.selectedSquares.length<9?this.scene.background.playSound("popMore"):this.selectedSquares.length<13?this.scene.background.playSound("popMany"):this.scene.background.playSound("popMost"),this.numSquares-=this.selectedSquares.length,this.collapse()}else for(var a=0,r=this.selectedSquares;a<r.length;a++){var h;(h=r[a]).unselect(),h.connector.alpha=0}this.onPop&&this.onPop(this.selectedSquares,t),this.selectedSquares=[]}},s.prototype.popAll=function(){this.numSquares>=4?this.scene.background.playSound("pop-all"):this.scene.background.playSound("pop-all-few");for(var e=0;e<this.cols;e++)for(var t=0;t<this.rows;t++){var s=this.squares[e][t];s&&(s.vanish(),this.squares[s.col][s.row]=null)}this.numSquares=0},s.prototype.collapse=function(){for(var e=0;e<this.cols;e++)for(var t=this.rows-1;;){for(;t>0&&null!==this.squares[e][t];)t--;if(t<=0)break;for(var s=t-1;s>=0&&null===this.squares[e][s];)s--;if(s<0)break;var i=this.squares[e][s];i.row=t,i.dy=this.rowToY(t),this.squares[e][s]=null,this.squares[e][t]=i}},s.prototype.squareAt=function(e,s){if(this.rising)return null;var i=this.localTransform.applyInverse(e,s),n=Math.floor(i.x/t.SQUARE_SIZE),o=Math.floor(i.y/t.SQUARE_SIZE);return n>-1&&n<this.cols&&o>-1&&o<this.rows?this.squares[n][o]:null},s.prototype.updateBlockStyles=function(){for(var e="squares-"+this.scene.registry.get("blockStyle"),t=0;t<this.cols;t++)for(var s=0;s<this.rows;s++){var i=this.squares[t][s];i&&i.image.setTexture(e,i.color)}},s.prototype.colToX=function(e){return e*t.SQUARE_SIZE+t.SQUARE_SIZE/2},s.prototype.rowToY=function(e){return e*t.SQUARE_SIZE+t.SQUARE_SIZE/2},s.prototype.update=function(e,t){if(this.rising&&(this.squareLayer.y=Math.max(this.squareLayer.y-.3*t,0),0===this.squareLayer.y)){this.squareLayer.x=0,this.rising=!1;for(var s=0,i=this.freeSquares;s<i.length;s++){i[s].float()}}for(var n=0,o=this.squares;n<o.length;n++)for(var a=0,r=o[n];a<r.length;a++){var h=r[a];h&&h.update(e,t)}for(var u=0,c=this.freeSquares;u<c.length;u++){c[u].update(e,t)}},s}(Phaser.GameObjects.Container);t.Squarea=h},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=s(0);t.ACHIEVEMENTS=[{name:"NO LEMONS, NO MELON",criterion:"Run out of squares for the first time."},{name:"I DID, DID I?",criterion:"Clear the first 5 levels."},{name:"PARTY BOOBYTRAP",criterion:"Clear the first level on your first move."},{name:"SAD, I'M MIDAS",criterion:"Make 5 palindromes of length 5 or longer \nin a row."},{name:"SO MANY DYNAMOS",criterion:"Make a palindrome worth 99 or more points."},{name:"STRESSED DESSERTS",criterion:"Pop 10 floating squares in one game."},{name:"LLAMA MALL",criterion:"Make a palindrome by just alternating\nbetween 2 colors for 9 or more squares."},{name:"GOLD LOG",criterion:"Make a palindrome that's just 12 or more\nsquares of the same color."},{name:"A CAR, A MAN, A MARACA",criterion:"Make a palindrome that includes all 5 colors."},{name:"WOW",criterion:"Reach 1000 points."},{name:"DEIFIED",criterion:"Make the OGOPOGO palindrome."},{name:"TOO BAD, I HID A BOOT",criterion:"Fall 1 point short of clearing a level."},{name:"NEVER ODD OR EVEN",criterion:"Make a palindrome of length 18 or longer."},{name:"REFLOG A GOLFER",criterion:"Clear the first 5 levels in 10 moves or less."},{name:"TOP SPOT",criterion:"Reach 2000 points."},{name:"DRAW, O COWARD",criterion:"Make a palindrome in the shape of a \n4x4 square."},{name:"STACK OF OK CATS",criterion:"Make a palindrome 10 squares tall."},{name:"RACE FAST, SAFE CAR",criterion:"Reach 1000 points in 200 seconds or less."},{name:"EVADE ME, DAVE",criterion:"Reach 2000 points without using any\nBonus Rows."},{name:"WE FEW",criterion:"Reach 3000 points."}];var a=function(e){function t(t,s,i,n,o,a){void 0===n&&(n=""),void 0===o&&(o=""),void 0===a&&(a=!1);var r=e.call(this,t,s,i)||this;return t.add.existing(r),r.block=t.add.image(0,0,"achievement-block",a?1:0),r.block.setAlpha(a?.2:.5),r.add(r.block),r.checkbox=t.add.image(-284,25,"checkbox",a?0:1),r.add(r.checkbox),a||(n=n.replace(/[^\w\s]/g,"").replace(/\w/g,"*")),r.nameText=t.add.bitmapText(0,-64,"info",n,48),r.nameText.setOrigin(.5,0),r.add(r.nameText),r.criterionText=t.add.bitmapText(-246,/\n/.test(o)?-10:10,"info",o,36),r.add(r.criterionText),r}return n(t,e),t.prototype.setText=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),this.nameText.setText(e),this.criterionText.setText(t)},t.prototype.achieve=function(){this.scene.background.playSound("achievement"),this.checkbox.setFrame(0),this.block.setFrame(1),this.block.setAlpha(1),this.scene.tweens.add({targets:this.block,props:{alpha:.2},duration:1e3})},t.prototype.unachieve=function(){this.checkbox.setFrame(1),this.block.setFrame(0),this.block.setAlpha(.5)},t}(Phaser.GameObjects.Container);t.AchievementBlock=a;var r=function(e){function s(){return e.call(this,"achievements")||this}return n(s,e),s.prototype.create=function(){e.prototype.create.call(this);var s=new o.Button(this,0,1150,"back-button",0,0,1,this.back.bind(this));this.ui.add(s);for(var i=this.registry.get("achievements"),n=[[]],r=0,h=0;h<t.ACHIEVEMENTS.length;h++)n[r].length>=5&&(n.push([]),r++),n[Math.floor(h/5)].push(new a(this,0,h%5*195,t.ACHIEVEMENTS[h].name,t.ACHIEVEMENTS[h].criterion,i[h]));this.achievementList=new o.PageInterface(this,0,140,n),this.ui.add(this.achievementList),this.prevButton=new o.Button(this,-200,1100,"arrow-button",0,1,2,this.prevPage.bind(this)),this.prevButton.setFlipX(!0),this.prevButton.setEnabled(!1),this.ui.add(this.prevButton),this.nextButton=new o.Button(this,200,1100,"arrow-button",0,1,2,this.nextPage.bind(this)),this.ui.add(this.nextButton),this.dunkUI()},s.prototype.nextPage=function(){this.achievementList.page<this.achievementList.pages.length-1&&(this.achievementList.changePage(1),this.achievementList.page===this.achievementList.pages.length-1&&this.nextButton.setEnabled(!1),this.prevButton.setEnabled(!0))},s.prototype.prevPage=function(){this.achievementList.page>0&&(this.achievementList.changePage(-1),0===this.achievementList.page&&this.prevButton.setEnabled(!1),this.nextButton.setEnabled(!0))},s.prototype.back=function(){this.changeTo("menu")},s.prototype.update=function(t,s){e.prototype.update.call(this,t,s)},s}(o.FlexScene);t.AchievementsScene=r},function(e,t,s){"use strict";t.__esModule=!0;var i=s(2),n=s(8),o=s(9),a=s(10),r=s(11),h=s(4),u=s(12),c=s(1),l=s(13),d=s(14);new Phaser.Game({width:0,height:0,parent:"game",scene:[d.PreloadScene,n.LoadScene,r.BackgroundScene,o.TutorialScene,a.MenuScene,i.MainScene,h.AchievementsScene,u.ScoresScene,c.OptionsScene,l.CreditsScene],backgroundColor:0,type:Phaser.CANVAS,scale:{autoCenter:Phaser.Scale.CENTER_BOTH,mode:Phaser.Scale.NONE}})},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=function(e){function t(t,s,i,n,o){var a=e.call(this,t,s,i)||this;a.score=0,a.scoreDisplay=0,a.scoreTextValue=0,a.scoreGoal=100,a.prevGoal=0,a.scoreGoal=n,a.onGoalReached=o;var r=t.add.image(0,0,"meter");return r.setOrigin(.5,0),a.add(r),a.meterInside=t.add.image(0,740,"meter-inside"),a.meterInside.setOrigin(.5,1),a.add(a.meterInside),a.scoreText=t.add.bitmapText(-25,780,"score","0",36),a.scoreText.setOrigin(1,0),a.add(a.scoreText),a.scoreGoal=n,a.goalText=t.add.bitmapText(-25,0,"score",String(a.scoreGoal),36),a.goalText.setOrigin(1,.3),a.add(a.goalText),a}return n(t,e),t.prototype.setLevel=function(e){this.scoreGoal=a(e),this.prevGoal=a(e-1),this.goalText.setText(String(this.scoreGoal))},t.prototype.setScore=function(e,t){this.score=e,t&&(this.scoreDisplay=e,this.scoreTextValue=e,this.scoreText.setText(String(e)))},t.prototype.update=function(e,t){this.scoreDisplay<this.score&&(this.scoreDisplay=Math.min(Math.max(this.scoreDisplay+.001*t,this.scoreDisplay+.002*(this.score-this.scoreDisplay)*t),this.scoreGoal),this.scoreDisplay>=this.scoreTextValue+1&&(this.scoreTextValue=Math.floor(this.scoreDisplay),!this.scene.background.sfx.points.isPlaying&&this.scoreTextValue<this.score&&this.scene.background.playSound("points"),this.scoreText.setText(String(this.scoreTextValue)))),this.scoreDisplay>=this.scoreGoal&&this.onGoalReached&&this.onGoalReached(),this.meterInside.setScale(1,(this.scoreDisplay-this.prevGoal)/(this.scoreGoal-this.prevGoal)),this.scoreText.setY(this.meterInside.y-730*this.meterInside.scaleY)},t}(Phaser.GameObjects.Container);function a(e){return e<=32?[0,30,80,150,240,350,480,630,800,1e3,1220,1460,1720,2e3,2300,2600,3e3,3400,3800,4200,4600,5e3,5410,5830,6260,6700,7150,7600,8060,8530,9010,9500,1e4][e]:1e4+500*(e-32)}t.ScoreBar=o,t.getLevelGoal=a},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=function(e){function t(t,s,i){var n=e.call(this,t,s,i)||this;return t.add.existing(n),n.squares=t.add.container(0,40),n.add(n.squares),n.text=t.add.bitmapText(0,-8,"score","",36),n.text.setOrigin(.5,.5),n.add(n.text),n}return n(t,e),t.prototype.addColor=function(e){var t=this.squares.last,s=this.scene.add.image(0,0,"squares-plain",e);s.setScale(.4),this.squares.add(s),t&&(s.frame===t.frame?this.squares.x-=13:this.squares.x-=20,s.x=-2*this.squares.x)},t.prototype.popColor=function(){var e=this.squares.getAt(this.squares.length-1),t=this.squares.getAt(this.squares.length-2);e.frame===t.frame?this.squares.x+=13:this.squares.x+=20,this.squares.removeAt(this.squares.length-1,!0)},t.prototype.clear=function(){this.squares.removeAll(!0),this.squares.x=0,this.text.setText("")},t}(Phaser.GameObjects.Container);t.ScorePreview=o},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=function(e){function t(){var t=e.call(this,"load")||this;return window.addEventListener("resize",t.onResize.bind(t)),t}return n(t,e),t.prototype.preload=function(){this.loadingAnim=this.add.sprite(0,200,"loading"),this.loadingAnim.anims.play("loading"),this.onResize(),this.load.audio("ambiance",["sfx/underwater.ogg","sfx/underwater.mp3"]),this.load.audio("sploosh",["sfx/sploosh.ogg","sfx/sploosh.mp3"]),this.load.audio("select0",["sfx/select5.ogg","sfx/select5.mp3"]),this.load.audio("select1",["sfx/select1.ogg","sfx/select1.mp3"]),this.load.audio("select2",["sfx/select2.ogg","sfx/select2.mp3"]),this.load.audio("select3",["sfx/select3.ogg","sfx/select3.mp3"]),this.load.audio("select4",["sfx/select4.ogg","sfx/select4.mp3"]),this.load.audio("selectp0",["sfx/select5p.ogg","sfx/select5p.mp3"]),this.load.audio("selectp1",["sfx/select1p.ogg","sfx/select1p.mp3"]),this.load.audio("selectp2",["sfx/select2p.ogg","sfx/select2p.mp3"]),this.load.audio("selectp3",["sfx/select3p.ogg","sfx/select3p.mp3"]),this.load.audio("selectp4",["sfx/select4p.ogg","sfx/select4p.mp3"]),this.load.audio("release0",["sfx/release5.ogg","sfx/release5.mp3"]),this.load.audio("release1",["sfx/release1.ogg","sfx/release1.mp3"]),this.load.audio("release2",["sfx/release2.ogg","sfx/release2.mp3"]),this.load.audio("release3",["sfx/release3.ogg","sfx/release3.mp3"]),this.load.audio("release4",["sfx/release4.ogg","sfx/release4.mp3"]),this.load.audio("reverse0",["sfx/reverse5.ogg","sfx/reverse5.mp3"]),this.load.audio("reverse1",["sfx/reverse1.ogg","sfx/reverse1.mp3"]),this.load.audio("reverse2",["sfx/reverse2.ogg","sfx/reverse2.mp3"]),this.load.audio("reverse3",["sfx/reverse3.ogg","sfx/reverse3.mp3"]),this.load.audio("reverse4",["sfx/reverse4.ogg","sfx/reverse4.mp3"]),this.load.audio("roar-1",["sfx/roar-1.ogg","sfx/roar-1.mp3"]),this.load.audio("roar-2",["sfx/roar-2.ogg","sfx/roar-2.mp3"]),this.load.audio("roar-3",["sfx/roar-3.ogg","sfx/roar-3.mp3"]),this.load.audio("roar-4",["sfx/roar-4.ogg","sfx/roar-4.mp3"]),this.load.audio("pop-few",["sfx/pop-few.ogg","sfx/pop-few.mp3"]),this.load.audio("pop-more",["sfx/pop-more.ogg","sfx/pop-more.mp3"]),this.load.audio("pop-many",["sfx/pop-many.ogg","sfx/pop-many.mp3"]),this.load.audio("pop-most",["sfx/pop-most.ogg","sfx/pop-most.mp3"]),this.load.audio("pop-all",["sfx/pop-all.ogg","sfx/pop-all.mp3"]),this.load.audio("pop-all-few",["sfx/pop-all-few.ogg","sfx/pop-all-few.mp3"]),this.load.audio("points",["sfx/points3.ogg","sfx/points3.mp3"]),this.load.audio("click-down",["sfx/click-down.ogg","sfx/click-down.mp3"]),this.load.audio("click-up",["sfx/click-up.ogg","sfx/click-up.mp3"]),this.load.audio("level-complete-1",["sfx/level-complete-1.ogg","sfx/level-complete-1.mp3"]),this.load.audio("level-complete-2",["sfx/level-complete-2.ogg","sfx/level-complete-2.mp3"]),this.load.audio("level-complete-3",["sfx/level-complete-3.ogg","sfx/level-complete-3.mp3"]),this.load.audio("level-complete-4",["sfx/level-complete-4.ogg","sfx/level-complete-4.mp3"]),this.load.audio("achievement",["sfx/achievement.ogg","sfx/achievement.mp3"]),this.load.audio("menu-music",["sfx/menu-music.ogg","sfx/menu-music.mp3"]),this.load.audio("bonus-row",["sfx/bonus-row.ogg","sfx/bonus-row.mp3"]),this.load.image("bubble","img/bubble.png"),this.load.image("glow","img/glow.png"),this.load.image("meter-glow","img/meter-glow.png"),this.load.image("godray","img/godray.png"),this.load.image("gradient","img/gradient.png"),this.load.image("ogopogo-head","img/ogopogo-head.png"),this.load.image("ogopogo-body","img/ogopogo-body2.png"),this.load.image("button-ripple","img/button-ripple.png"),this.load.spritesheet("squares-plain","img/squares-plain.png",{frameWidth:76,frameHeight:76}),this.load.spritesheet("squares-colorblind","img/squares-colorblind.png",{frameWidth:76,frameHeight:76}),this.load.spritesheet("squares-letters","img/squares-letters.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("highlight","img/highlight.png",{frameWidth:90,frameHeight:90}),this.load.spritesheet("vanish","img/vanish.png",{frameWidth:90,frameHeight:90}),this.load.image("container","img/container.png"),this.load.image("container-3x4","img/container-3x4.png"),this.load.image("connection","img/connection.png"),this.load.image("meter","img/meter.png"),this.load.image("meter-inside","img/meter-inside.png"),this.load.image("achievements-meter","img/achievements-meter.png"),this.load.image("achievements-meter-inside","img/achievements-meter-inside.png"),this.load.spritesheet("achievement-block","img/achievement-block.png",{frameWidth:660,frameHeight:170}),this.load.spritesheet("checkbox","img/checkbox.png",{frameWidth:56,frameHeight:46}),this.load.image("volume-meter","img/volume-meter.png"),this.load.image("volume-meter-inside","img/volume-meter-inside.png"),this.load.image("game-over","img/game-over.png"),this.load.spritesheet("play-button","img/play-button.png",{frameWidth:206,frameHeight:74}),this.load.spritesheet("resume-button","img/resume-button.png",{frameWidth:206,frameHeight:74}),this.load.spritesheet("achievements-button","img/achievements-button.png",{frameWidth:298,frameHeight:74}),this.load.spritesheet("scores-button","img/scores-button.png",{frameWidth:178,frameHeight:74}),this.load.spritesheet("high-scores-button","img/high-scores-button.png",{frameWidth:244,frameHeight:74}),this.load.spritesheet("mvps-button","img/mvps-button.png",{frameWidth:244,frameHeight:74}),this.load.spritesheet("play-again-button","img/play-again-button.png",{frameWidth:214,frameHeight:74}),this.load.spritesheet("end-game-button","img/end-game-button.png",{frameWidth:214,frameHeight:74}),this.load.spritesheet("skip-tutorial-button","img/skip-tutorial-button.png",{frameWidth:262,frameHeight:74}),this.load.spritesheet("lets-start-button","img/lets-start-button.png",{frameWidth:226,frameHeight:74}),this.load.spritesheet("exit-button","img/exit-button.png",{frameWidth:144,frameHeight:74}),this.load.spritesheet("main-menu-button","img/main-menu-button.png",{frameWidth:241,frameHeight:74}),this.load.spritesheet("save-and-exit-button","img/save-and-exit-button.png",{frameWidth:276,frameHeight:74}),this.load.spritesheet("back-button","img/back-button.png",{frameWidth:148,frameHeight:74}),this.load.spritesheet("arrow-button","img/arrow-button.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("menu-button","img/menu-button.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("x-button","img/x-button.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("row-button","img/row-button.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("minus-button","img/minus-button.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("plus-button","img/plus-button.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("options-button","img/options-button.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("options-text-button","img/options-text-button.png",{frameWidth:207,frameHeight:74}),this.load.spritesheet("credits-button","img/credits-button.png",{frameWidth:74,frameHeight:74}),this.load.spritesheet("replay-tutorial-button","img/replay-tutorial-button.png",{frameWidth:280,frameHeight:74}),this.load.spritesheet("9-by-16-button","img/9-by-16-button.png",{frameWidth:116,frameHeight:74}),this.load.spritesheet("fit-to-screen-button","img/fit-to-screen-button.png",{frameWidth:240,frameHeight:74}),this.load.spritesheet("undo-button","img/undo-button.png",{frameWidth:132,frameHeight:74}),this.load.spritesheet("music-button","img/music-button.png",{frameWidth:138,frameHeight:74}),this.load.spritesheet("sounds-button","img/sounds-button.png",{frameWidth:161,frameHeight:74}),this.load.spritesheet("ambiance-button","img/ambiance-button.png",{frameWidth:209,frameHeight:74}),this.load.spritesheet("plus","img/plus.png",{frameWidth:44,frameHeight:44}),this.load.bitmapFont("info","font/info.png","font/info.fnt"),this.load.bitmapFont("score","font/score.png","font/score.fnt")},t.prototype.create=function(){this.anims.create({key:"select",frames:this.anims.generateFrameNumbers("highlight",{frames:[0,1,2,3,4]}),frameRate:30}),this.anims.create({key:"unselect",frames:this.anims.generateFrameNumbers("highlight",{frames:[5,6,7,8]}),frameRate:30}),this.anims.create({key:"vanish",frames:this.anims.generateFrameNumbers("vanish",{frames:[0,1,2,3]}),frameRate:30}),this.anims.create({key:"bonus-row-added",frames:this.anims.generateFrameNumbers("row-button",{frames:[3,1,3,1,3,1,3,1,3,1]}),frameRate:8}),this.anims.create({key:"plus-appear",frames:this.anims.generateFrameNumbers("plus",{frames:[1,2,3,4]}),frameRate:30}),this.anims.create({key:"plus-vanish",frames:this.anims.generateFrameNumbers("plus",{frames:[3,2,1,0]}),frameRate:30}),this.anims.create({key:"bonus-row-reminder",frames:this.anims.generateFrameNumbers("row-button",{frames:[3,1]}),frameRate:2,repeat:-1});var e,t=localStorage.getItem("ogopogo_data");if(t)for("object"!=typeof(e=JSON.parse(t)).gameInProgress&&(e.gameInProgress=!1),"boolean"!=typeof e.secret&&(e.secret=!1),"boolean"!=typeof e.musicOn&&(e.musicOn=!0),"boolean"!=typeof e.soundsOn&&(e.soundsOn=!0),"boolean"!=typeof e.ambianceOn&&(e.ambianceOn=!0),"number"!=typeof e.volume&&(e.volume=1),"number"!=typeof e.gamesPlayed&&(e.gamesPlayed=0),"number"!=typeof e.dimensions&&(e.dimensions=0),"string"!=typeof e.blockStyle&&(e.blockStyle="plain"),e.scores instanceof Array||(e.scores=[]),e.mvps instanceof Array||(e.mvps=[]),e.achievements instanceof Array||(e.achievements=[]);e.achievements.length<20;)e.achievements.push(!1);else e={gameInProgress:!1,dimensions:0,scores:[],mvps:[],achievements:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],secret:!1,musicOn:!0,soundsOn:!0,ambianceOn:!0,volume:1,gamesPlayed:0,blockStyle:"plain"},localStorage.setItem("ogopogo_data",JSON.stringify(e));this.registry.set(e,null),this.scene.start("background")},t.prototype.start=function(){this.sound.play("silence")},t.prototype.onResize=function(){var e=window.devicePixelRatio||1,t=window.innerHeight*e,s=window.innerWidth*e;this.scale.resize(s,t);var i=t/1280;i=Math.min(i,s/720),this.loadingAnim&&(this.loadingAnim.setScale(i),this.loadingAnim.setX(s/2),this.loadingAnim.setY(t/2))},t}(Phaser.Scene);t.LoadScene=o},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=s(1),a=s(3),r=s(0),h=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t}(Phaser.GameObjects.Container),u=function(e){function t(t,s,i,n){var o=e.call(this,t,0,i,"info",n,48,1)||this;return o.setOrigin(.5,0),s.add(o),o}return n(t,e),t}(Phaser.GameObjects.BitmapText),c=function(e){function t(t,s){var i=e.call(this,t)||this;return t.add.existing(i),i.setAlpha(0),i.onFinish=s,new u(t,i,450,"This is a game about palindromes."),i}return n(t,e),t.prototype.start=function(){this.scene.time.addEvent({callback:this.onFinish,callbackScope:this.scene,delay:3e3})},t.prototype.onBlockStyleChanged=function(){},t.prototype.onMenuToggle=function(e){},t.prototype.update=function(e,t){},t}(h),l=function(e){function t(t,s){var i=e.call(this,t)||this;return t.add.existing(i),i.setAlpha(0),i.onFinish=s,i.squarea=new a.Squarea(t,-230,500,1,5),i.squarea.setSquares([0,3,2,3,0]),i.squarea.requiredLength=5,i.squarea.enabled=!1,i.squarea.onPop=function(e,t){t&&(this.squarea.enabled=!1,this.onFinish.call(this.scene))}.bind(i),i.add(i.squarea),new u(t,i,250,"A palindrome is a sequence that is the\nsame forwards and backwards.\n\nFor example:\n\n\n\n\n\n\nTrace the palindrome with your\nfinger or mouse."),i}return n(t,e),t.prototype.start=function(){this.squarea.enabled=!0},t.prototype.update=function(e,t){this.squarea.update(e,t)},t.prototype.onBlockStyleChanged=function(){this.squarea.updateBlockStyles()},t.prototype.onMenuToggle=function(e){this.squarea.enabled=!e},t}(h),d=function(e){function t(t,s){var i=e.call(this,t)||this;t.add.existing(i),i.setAlpha(0),i.onFinish=s,new u(t,i,200,"Palindromes don't need to be\nin a straight line.");var n=!1,o=!1;return i.squarea1=new a.Squarea(t,-140,375,3,3),i.squarea1.setSquares([1,null,null,2,null,null,3,2,1]),i.squarea1.requiredLength=5,i.squarea1.enabled=!1,i.squarea1.onPop=function(e,t){t&&(n=!0,o&&this.onFinish.call(this.scene))}.bind(i),i.add(i.squarea1),i.squarea2=new a.Squarea(t,-140,775,2,3),i.squarea2.setSquares([1,3,2,2,3,1]),i.squarea2.requiredLength=6,i.squarea2.enabled=!1,i.squarea2.onPop=function(e,t){t&&(o=!0,n&&this.onFinish.call(this.scene))}.bind(i),i.add(i.squarea2),i}return n(t,e),t.prototype.start=function(){this.squarea1.enabled=!0,this.squarea2.enabled=!0},t.prototype.update=function(e,t){this.squarea1.update(e,t),this.squarea2.update(e,t)},t.prototype.onBlockStyleChanged=function(){this.squarea1.updateBlockStyles(),this.squarea2.updateBlockStyles()},t.prototype.onMenuToggle=function(e){this.squarea1.enabled=!e,this.squarea2.enabled=!e},t}(h),p=function(e){function t(t,s){var i=e.call(this,t)||this;t.add.existing(i),i.setAlpha(0),i.onFinish=s,new u(t,i,200,"Longer palindromes are worth\nmore points than shorter ones.\n\nMore complicated palindromes are\nworth more points than simpler ones.");var n=new u(t,i,600,""),o=new u(t,i,800,""),h=new u(t,i,1e3,""),c=!1,l=!1,d=!1;return i.squarea1=new a.Squarea(t,-140,500,1,3),i.squarea1.setSquares([3,0,3]),i.squarea1.requiredLength=3,i.squarea1.enabled=!1,i.squarea1.onPop=function(e,t){t?(c=!0,l&&d&&this.scene.time.addEvent({callback:this.onFinish,callbackScope:this.scene,delay:500})):n.setText("")}.bind(i),i.squarea1.onSelectionUpdate=function(e){var t=r.calcScore(e);n.setText(t+(t>1?" points":" point"))},i.add(i.squarea1),i.squarea2=new a.Squarea(t,-230,700,1,5),i.squarea2.setSquares([3,3,0,3,3]),i.squarea2.requiredLength=5,i.squarea2.enabled=!1,i.squarea2.onPop=function(e,t){t?(l=!0,c&&d&&this.scene.time.addEvent({callback:this.onFinish,callbackScope:this.scene,delay:500})):o.setText("")}.bind(i),i.squarea2.onSelectionUpdate=function(e){var t=r.calcScore(e);o.setText(t+(t>1?" points":" point"))},i.add(i.squarea2),i.squarea3=new a.Squarea(t,-230,900,1,5),i.squarea3.setSquares([2,3,0,3,2]),i.squarea3.requiredLength=5,i.squarea3.enabled=!1,i.squarea3.onPop=function(e,t){t?(d=!0,c&&l&&this.scene.time.addEvent({callback:this.onFinish,callbackScope:this.scene,delay:500})):h.setText("")}.bind(i),i.squarea3.onSelectionUpdate=function(e){var t=r.calcScore(e);h.setText(t+(t>1?" points":" point"))},i.add(i.squarea3),i}return n(t,e),t.prototype.start=function(){this.squarea1.enabled=!0,this.squarea2.enabled=!0,this.squarea3.enabled=!0},t.prototype.update=function(e,t){this.squarea1.update(e,t),this.squarea2.update(e,t),this.squarea3.update(e,t)},t.prototype.onBlockStyleChanged=function(){this.squarea1.updateBlockStyles(),this.squarea2.updateBlockStyles(),this.squarea3.updateBlockStyles()},t.prototype.onMenuToggle=function(e){this.squarea1.enabled=!e,this.squarea2.enabled=!e,this.squarea3.enabled=!e},t}(h),g=function(e){function t(t,s){var i=e.call(this,t)||this;t.add.existing(i),i.setAlpha(0),i.onFinish=s,new u(t,i,200,"Is a single square a palindrome?");var n=new u(t,i,500,"Yes, it is!\n\nIt's only worth 1 point, but it's useful\nfor setting up longer palindromes.");n.setAlpha(0);var o=i.scene.add.image(-195,750,"container-3x4");return o.setAlpha(0),o.setOrigin(0,0),i.add(o),i.squarea1=new a.Squarea(t,-50,325,1,1),i.squarea1.setSquares([2]),i.squarea1.enabled=!1,i.squarea1.onPop=function(e,t){t&&(this.squarea2.enabled=!0,this.scene.tweens.add({targets:[this.squarea2,n,o],props:{alpha:1},duration:1e3}))}.bind(i),i.add(i.squarea1),i.squarea2=new a.Squarea(t,-185,850,2,4),i.squarea2.setSquares([0,null,3,null,3,1,2,0]),i.squarea2.requiredPalindrome=[2],i.squarea2.enabled=!1,i.squarea2.setAlpha(0),i.squarea2.onPop=function(e,t){t&&(1===e.length?this.squarea2.requiredPalindrome=[0,3,1,3,0]:this.onFinish.call(this.scene))}.bind(i),i.add(i.squarea2),i}return n(t,e),t.prototype.start=function(){this.squarea1.enabled=!0},t.prototype.update=function(e,t){this.squarea1.update(e,t),this.squarea2.update(e,t)},t.prototype.onBlockStyleChanged=function(){this.squarea1.updateBlockStyles(),this.squarea2.updateBlockStyles()},t.prototype.onMenuToggle=function(e){this.squarea1.enabled=!e,this.squarea2.enabled=!e},t}(h),m=function(e){function t(t,s){var i=e.call(this,t)||this;return t.add.existing(i),i.setAlpha(0),i.onFinish=s,new u(t,i,450,"Try to reach each level's score goal\nwith the squares you're given.\n\n\n\nGood luck!"),i.add(new r.Button(t,0,900,"lets-start-button",0,0,1,s.bind(t))),i}return n(t,e),t.prototype.start=function(){},t.prototype.update=function(e,t){},t.prototype.onBlockStyleChanged=function(){},t.prototype.onMenuToggle=function(e){},t}(h),f=function(e){function t(){return e.call(this,"tutorial")||this}return n(t,e),t.prototype.nextPage=function(){this.page>-1&&this.page<this.pages.length-1&&this.tweens.add({targets:this.pages[this.page],props:{alpha:0},duration:1e3}),this.page++,this.page<this.pages.length?this.tweens.add({targets:this.pages[this.page],props:{alpha:1},duration:1e3,delay:1500,onComplete:this.pages[this.page].start,onCompleteScope:this.pages[this.page]}):this.endTutorial(),1===this.page&&this.tweens.add({targets:this.pauseButton,props:{alpha:1},duration:1e3,delay:1500}),this.pages[this.page].onBlockStyleChanged(),this.pauseButton.optionsMenu.onBlockStyleChanged=this.pages[this.page].onBlockStyleChanged.bind(this.pages[this.page]),this.pauseButton.onToggleMenu=this.pages[this.page].onMenuToggle.bind(this.pages[this.page])},t.prototype.create=function(){e.prototype.create.call(this),this.page=-1,this.pages=[new c(this,this.nextPage),new l(this,this.nextPage),new d(this,this.nextPage),new p(this,this.nextPage),new g(this,this.nextPage),new m(this,this.nextPage)],this.ui.add(this.pages),this.pauseButton=new o.PauseButton(this,238,97,[new r.Button(this,0,700,"skip-tutorial-button",0,0,1,this.endTutorial.bind(this))]),this.pauseButton.pauseMenu.add(new r.Button(this,0,550,"options-text-button",0,0,1,this.pauseButton.toggleOptions.bind(this.pauseButton))),this.ui.add(this.pauseButton),this.pauseButton.setAlpha(0),this.nextPage(),this.background.stopMenuMusic(),this.background.inMenu=!1},t.prototype.endTutorial=function(){this.foreground.visible&&this.pauseButton.toggleMenu(),this.changeTo("main")},t.prototype.update=function(t,s){e.prototype.update.call(this,t,s),this.page>-1&&this.page<this.pages.length&&this.pages[this.page].update(t,s)},t}(r.FlexScene);t.TutorialScene=f},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=s(0),a=function(e){function t(t,s,i){var n=e.call(this,t,s,i)||this;return n.blocks=[new Phaser.GameObjects.Image(t,-270,0,"squares-letters",0),new Phaser.GameObjects.Image(t,-180,0,"squares-letters",1),new Phaser.GameObjects.Image(t,-90,0,"squares-letters",0),new Phaser.GameObjects.Image(t,0,0,"squares-letters",2),new Phaser.GameObjects.Image(t,90,0,"squares-letters",0),new Phaser.GameObjects.Image(t,180,0,"squares-letters",1),new Phaser.GameObjects.Image(t,270,0,"squares-letters",0)],n.add(n.blocks),n}return n(t,e),t.prototype.update=function(e,t){for(var s=0;s<this.blocks.length;s++)this.blocks[s].setY(20*Math.sin(e/500-150*s))},t}(Phaser.GameObjects.Container),r=function(e){function t(){return e.call(this,"menu")||this}return n(t,e),t.prototype.create=function(){e.prototype.create.call(this),this.title=new a(this,0,200),this.ui.add(this.title);var t=new o.Button(this,0,450,"play-button",0,0,1,this.play.bind(this));this.ui.add(t),this.registry.values.gameInProgress&&t.setTexture("resume-button");var s=new o.Button(this,0,650,"achievements-button",0,0,1,this.achievements.bind(this));this.ui.add(s);var i=this.add.image(0,730,"achievements-meter");this.ui.add(i);var n=this.add.image(-183,730,"achievements-meter-inside");n.setOrigin(0,.5),this.ui.add(n);for(var r=0,h=this.registry.get("achievements")||[],u=0,c=h;u<c.length;u++){c[u]&&r++}n.setScale(r/h.length,1);var l=new Phaser.GameObjects.BitmapText(this,0,760,"info",String(r)+"/"+String(h.length),42,1);l.setOrigin(.5,0),this.ui.add(l),this.ui.add(new o.Button(this,0,900,"scores-button",0,0,1,this.scores.bind(this))),this.ui.add(new o.Button(this,-100,1020,"options-button",0,0,1,this.options.bind(this))),this.ui.add(new o.Button(this,100,1020,"credits-button",0,0,1,this.credits.bind(this)));var d=new Phaser.GameObjects.BitmapText(this,0,1130,"info","a game by Chris Klimowski",48,1);d.setOrigin(.5,0),this.ui.add(d),this.dunkUI(),this.background.playMenuMusic(),this.background.inMenu=!0},t.prototype.play=function(){0===this.registry.get("gamesPlayed")?this.changeTo("tutorial"):this.changeTo("main")},t.prototype.achievements=function(){this.changeTo("achievements")},t.prototype.scores=function(){this.changeTo("scores")},t.prototype.options=function(){this.changeTo("options")},t.prototype.credits=function(){this.changeTo("credits")},t.prototype.update=function(t,s){e.prototype.update.call(this,t,s),this.title.update(t,s)},t}(o.FlexScene);t.MenuScene=r},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,s=arguments.length;t<s;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<s;t++)for(var o=arguments[t],a=0,r=o.length;a<r;a++,n++)i[n]=o[a];return i};t.__esModule=!0,t.BACKGROUNDS=[[48,66,123],[47,72,120],[48,81,123],[40,84,113],[38,89,103],[39,96,70],[44,97,57],[43,93,43],[55,90,37],[103,58,44],[122,53,43],[121,43,43],[131,48,73],[98,45,113],[88,45,119],[71,49,121]];var a=function(e){function s(){var s=e.call(this,"background")||this;return s.bg=o(t.BACKGROUNDS[0]),s.dbg=t.BACKGROUNDS[0],window.addEventListener("resize",s.onResize.bind(s)),window.addEventListener("focus",s.onFocus.bind(s)),s}return n(s,e),s.prototype.createSurfaceBubbles=function(){this.surfaceBubbles.emitParticleAt(0,-200)},s.prototype.createMeterBubbles=function(){this.meterGlow.emitParticleAt(238,605),this.meterBubbles.emitParticleAt(238,230)},s.prototype.createBubble=function(e,t){this.singleBubble.emitParticleAt(e,t),this.squareGlow.emitParticleAt(e,t)},s.prototype.createButtonRipple=function(e,t){this.buttonRipple.emitParticleAt(e,t)},s.prototype.setColor=function(e,s){this.dbg=t.BACKGROUNDS[e%t.BACKGROUNDS.length],s&&(this.bg=o(this.dbg))},s.prototype.toggleAmbiance=function(){this.ambianceOn?this.sfx.ambiance.pause():this.sfx.ambiance.play(),this.ambianceOn=!this.ambianceOn,this.registry.set("ambianceOn",this.ambianceOn)},s.prototype.toggleSounds=function(){this.soundsOn=!this.soundsOn,this.registry.set("soundsOn",this.soundsOn)},s.prototype.toggleMusic=function(){this.musicOn&&(this.sfx.menuMusic.stop(),this.inMenu=!1),this.musicOn=!this.musicOn,this.registry.set("musicOn",this.musicOn)},s.prototype.playSound=function(e){this.soundsOn&&(this.sfx[e]?this.sfx[e].play():this.sound.play(e))},s.prototype.playMenuMusic=function(){this.musicOn&&!this.inMenu&&(this.sfx.menuMusic.volume=1,this.sfx.menuMusic.play())},s.prototype.stopMenuMusic=function(){this.tweens.add({targets:this.sfx.menuMusic,volume:0,duration:3e3})},s.prototype.triggerSighting=function(e){if(!this.ogopogo[6].isFollowing()){this.playSound(["roar-1","roar-2","roar-3","roar-4"][e]);var t=[[-1e3,2700,-500,1400,0,1430,500,1400,1e3,2700],[-700,2500,140,1200,0,950,-200,1200,400,1500,500,2500],[-500,2e3,-300,1400,-320,1e3,0,850,200,1e3,200,1300,0,1400,-200,1300,-200,1100,0,1100,300,1400,500,2e3],[-500,2100,70,1200,-200,800,-150,600,0,560,150,600,200,800,-70,1200,500,2100]][e],s=new Phaser.Curves.Spline(t),i=new Phaser.Curves.Path(0,0);i.add(s);for(var n=0;n<7;n++)this.ogopogo[n].setPosition(0,-500),this.ogopogo[n].setPath(i),this.ogopogo[n].startFollow({duration:7e3,delay:130*n,rotateToPath:!0})}},s.prototype.create=function(){this.sfx={ambiance:this.sound.add("ambiance",{volume:1.5,loop:!0}),sploosh:this.sound.add("sploosh"),selectp0:this.sound.add("selectp0"),selectp1:this.sound.add("selectp1"),selectp2:this.sound.add("selectp2"),selectp3:this.sound.add("selectp3"),selectp4:this.sound.add("selectp4"),pop10:this.sound.add("release0"),pop11:this.sound.add("release1"),pop12:this.sound.add("release2"),pop13:this.sound.add("release3"),pop14:this.sound.add("release4"),popFew:this.sound.add("pop-few"),popMore:this.sound.add("pop-more"),popMany:this.sound.add("pop-many"),popMost:this.sound.add("pop-most"),points:this.sound.add("points"),clickDown:this.sound.add("click-down"),clickUp:this.sound.add("click-up"),achievement:this.sound.add("achievement"),levelComplete1:this.sound.add("level-complete-1"),levelComplete2:this.sound.add("level-complete-2"),levelComplete3:this.sound.add("level-complete-3"),levelComplete4:this.sound.add("level-complete-4"),menuMusic:this.sound.add("menu-music"),bonusRow:this.sound.add("bonus-row")},this.musicOn=this.registry.get("musicOn"),this.soundsOn=this.registry.get("soundsOn"),this.ambianceOn=this.registry.get("ambianceOn"),this.sound.volume=this.registry.get("volume"),this.ambianceOn&&this.sfx.ambiance.play(),this.inMenu=!1,this.gradient=this.add.image(0,0,"gradient"),this.gradient.setOrigin(.5,0),this.scenery=this.add.container(0,0),this.surfaceBubbles=this.add.particles("bubble"),this.surfaceBubbles.createEmitter({lifespan:5e3,speed:{min:500,max:800},angle:{min:88,max:92},gravityY:-400,scale:{min:.2,max:.8},quantity:70,on:!1,emitZone:{type:"random",source:new Phaser.Geom.Rectangle(-400,-200,800,200),quantity:70}}),this.scenery.add(this.surfaceBubbles),this.singleBubble=this.add.particles("bubble"),this.singleBubble.createEmitter({lifespan:3e3,speed:{min:0,max:200},angle:{min:70,max:110},scale:{min:.2,max:.8},gravityY:-400,quantity:1,on:!1}),this.scenery.add(this.singleBubble),this.squareGlow=this.add.particles("glow"),this.squareGlow.createEmitter({alpha:{start:1,end:0},lifespan:400,on:!1,gravityY:0,quantity:1,speed:0}),this.scenery.add(this.squareGlow),this.buttonRipple=this.add.particles("button-ripple"),this.buttonRipple.createEmitter({alpha:{start:1,end:0},scale:{start:1,end:2.5},lifespan:900,on:!1,gravityY:0,quantity:1,speed:0}),this.scenery.add(this.buttonRipple),this.meterBubbles=this.add.particles("bubble"),this.meterBubbles.createEmitter({lifespan:5e3,speed:{min:0,max:200},angle:{min:70,max:110},gravityY:-400,scale:{min:.2,max:.8},quantity:20,on:!1,emitZone:{type:"random",source:new Phaser.Geom.Line(0,0,0,720),quantity:20}}),this.scenery.add(this.meterBubbles),this.meterGlow=this.add.particles("meter-glow"),this.meterGlow.createEmitter({alpha:{start:1,end:0},lifespan:400,on:!1,gravityY:-400,quantity:1,speed:0}),this.scenery.add(this.meterGlow),this.ogopogo=[],this.ogopogo[0]=this.add.follower(null,0,-500,"ogopogo-head"),this.ogopogo[0].setAlpha(.7);for(var e=1;e<7;e++)this.ogopogo[e]=this.add.follower(null,0,-500,"ogopogo-body"),this.ogopogo[e].setScale(1,1.4-.1*e),this.ogopogo[e].setAlpha(.7);this.scenery.add(this.ogopogo);var t=this.add.particles("godray");t.createEmitter({blendMode:Phaser.BlendModes.ADD,lifespan:4e3,speedX:{min:2,max:20},y:{min:-20,max:20},quantity:1,rotate:5,scaleY:function(e,t,s){return 1-2*Math.abs(s-.5)},frequency:300,alpha:function(e,t,s){return.2-.4*Math.abs(s-.5)},emitZone:{type:"random",source:new Phaser.Geom.Line(-1e3,0,1e3,0)}}),this.scenery.add(t),this.onResize(),this.registry.values.gameInProgress&&this.setColor(this.registry.values.gameInProgress.level-1,!0),this.scene.launch("main"),this.registry.events.on(Phaser.Data.Events.CHANGE_DATA,this.onRegistryUpdate,this)},s.prototype.onRegistryUpdate=function(){localStorage.setItem("ogopogo_data",JSON.stringify(this.registry.getAll()))},s.prototype.onResize=function(){var e=window.devicePixelRatio||1,t=window.innerHeight*e,s=window.innerWidth*e;1===this.registry.get("dimensions")&&(s=(t=Math.min(t,s*(16/9)))*(9/16)),this.scale.resize(s,t);var i=t/1280;i=Math.min(i,s/720),this.scenery&&(this.scenery.setScale(i),this.scenery.setX(s/2)),this.gradient&&(this.gradient.setScale(s/720,t/1280),this.gradient.setX(s/2))},s.prototype.onFocus=function(){this.ambianceOn&&this.sfx.ambiance.play()},s.prototype.update=function(e,t){this.bg[0]+=.001*(this.dbg[0]-this.bg[0])*t,this.bg[1]+=.001*(this.dbg[1]-this.bg[1])*t,this.bg[2]+=.001*(this.dbg[2]-this.bg[2])*t,this.cameras.main.setBackgroundColor((Math.floor(this.bg[0])<<16)+(Math.floor(this.bg[1])<<8)+Math.floor(this.bg[2]))},s}(Phaser.Scene);t.BackgroundScene=a},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=s(0),a=function(e){function t(t,s,i,n,o,a){var r=e.call(this,t,s,i)||this,h=t.add.bitmapText(-260,0,"info",String(n),48);h.setOrigin(0,.5);var u=t.add.bitmapText(-70,0,"info","level "+o,36);u.setOrigin(0,.5);var c=t.add.bitmapText(260,0,"info",String(a),36);return c.setOrigin(1,.5),r.add([h,u,c]),r}return n(t,e),t}(Phaser.GameObjects.Container);t.NumericalScore=a;var r=function(e){function t(t,s,i,n,o,a){for(var r=e.call(this,t,s,i)||this,h=[],u=0,c=-1,l=0,d=n;l<d.length;l++){var p=d[l];u-=p===c?13:20,(f=t.add.image(-2*u,0,"squares-plain",p)).setScale(.4),h.push(f),c=p}for(var g=0,m=h;g<m.length;g++){var f;(f=m[g]).x+=u}r.add(h);var b=t.add.bitmapText(-200,46,"info",o+(o>1?" points":" point"),36);b.setOrigin(0,.5);var v=t.add.bitmapText(200,46,"info",a,36);return v.setOrigin(1,.5),r.add([b,v]),r}return n(t,e),t}(Phaser.GameObjects.Container);t.PalindromeScore=r;var h=function(e){function t(){return e.call(this,"scores")||this}return n(t,e),t.prototype.create=function(){e.prototype.create.call(this);var t=new o.Button(this,0,1150,"back-button",0,0,1,this.back.bind(this));this.ui.add(t);for(var s=[[],[]],i=this.registry.get("scores"),n=this.registry.get("mvps"),h=0;h<i.length;h++)s[0].push(new a(this,0,110*h,i[h].score,i[h].level,i[h].date));for(h=0;h<n.length;h++)s[1].push(new r(this,0,110*h,n[h].squares,n[h].score,n[h].date));this.scoreContainer=new o.PageInterface(this,0,140,s),this.ui.add(this.scoreContainer),this.highScoresButton=new o.Button(this,-140,1020,"high-scores-button",2,0,1,this.viewScores.bind(this)),this.highScoresButton.setEnabled(!1),this.ui.add(this.highScoresButton),this.mvpsButton=new o.Button(this,140,1020,"mvps-button",2,0,1,this.viewMvps.bind(this)),this.ui.add(this.mvpsButton),this.dunkUI()},t.prototype.viewScores=function(){1===this.scoreContainer.page&&(this.scoreContainer.changePage(-1),this.highScoresButton.setEnabled(!1),this.mvpsButton.setEnabled(!0))},t.prototype.viewMvps=function(){0===this.scoreContainer.page&&(this.scoreContainer.changePage(1),this.mvpsButton.setEnabled(!1),this.highScoresButton.setEnabled(!0))},t.prototype.back=function(){this.changeTo("menu")},t.prototype.update=function(t,s){e.prototype.update.call(this,t,s)},t}(o.FlexScene);t.ScoresScene=h},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=s(0),a=function(e){function t(){return e.call(this,"credits")||this}return n(t,e),t.prototype.create=function(){e.prototype.create.call(this);var t=new Phaser.GameObjects.BitmapText(this,0,950,"info","more things at chrisklimowski.com\nfollow @csklimowski for updates",48,1);t.setOrigin(.5,0),this.ui.add(t);var s=new Phaser.GameObjects.BitmapText(this,-300,200,"info","key playtesters\n\nJeremy Dauer\nJonathan Hall\nZachary Leib-Perry\nStephen McMillan\nJoseph Scheidemandel\nBarbara Seckinger",48,0);s.setOrigin(0,0),this.ui.add(s);var i=new Phaser.GameObjects.BitmapText(this,300,650,"info",'special thanks\n\nNellie Nelson\nNeil "Fred" Picciotto',48,2);i.setOrigin(1,0),this.ui.add(i),this.ui.add(new o.Button(this,0,1150,"back-button",0,0,1,this.back.bind(this))),this.dunkUI()},t.prototype.back=function(){this.changeTo("menu")},t.prototype.update=function(t,s){e.prototype.update.call(this,t,s)},t}(o.FlexScene);t.CreditsScene=a},function(e,t,s){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)});t.__esModule=!0;var o=function(e){function t(){var t=e.call(this,"preload")||this;return window.addEventListener("resize",t.onResize.bind(t)),t}return n(t,e),t.prototype.preload=function(){this.load.spritesheet("loading","img/loading.png",{frameWidth:270,frameHeight:32}),this.load.spritesheet("go-button","img/go-button.png",{frameWidth:112,frameHeight:130}),this.load.audio("silence",["sfx/silence.ogg","sfx/silence.mp3"])},t.prototype.create=function(){this.anims.create({key:"loading",frames:this.anims.generateFrameNumbers("loading",{frames:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}),frameRate:14,repeat:-1}),this.goButton=this.add.image(0,0,"go-button"),this.input.on(Phaser.Input.Events.POINTER_DOWN,this.onPress,this),this.input.on(Phaser.Input.Events.POINTER_UP,this.onRelease,this),this.onResize()},t.prototype.onPress=function(){this.goButton.setFrame(1)},t.prototype.onRelease=function(){this.sound.play("silence"),this.scene.start("load")},t.prototype.onResize=function(){var e=window.devicePixelRatio||1,t=window.innerHeight*e,s=window.innerWidth*e;this.scale.resize(s,t);var i=t/1280;i=Math.min(i,s/720),this.goButton&&(this.goButton.setScale(i),this.goButton.setX(s/2),this.goButton.setY(t/2))},t}(Phaser.Scene);t.PreloadScene=o}]);