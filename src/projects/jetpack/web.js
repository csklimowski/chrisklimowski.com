"use strict";var _get=function t(e,a,s){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,a);if(void 0!==i){if("value"in i)return i.value;i=i.get;return void 0!==i?i.call(s):void 0}e=Object.getPrototypeOf(e);if(null!==e)return t(e,a,s)},_createClass=function(){function s(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,a){return e&&s(t.prototype,e),a&&s(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jetpack=function(){var t=(_inherits(e,Phaser.State),_createClass(e,[{key:"preload",value:function(){C.add.text(315,300,"Loading...",{font:"30px monospace",fill:"#00ff00",align:"center"}).anchor.set(.5),C.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,C.scale.windowConstraints.bottom="layout",C.scale.pageAlignHorizontally=!0,C.scale.pageAlignVertically=!0,C.load.spritesheet("player","img/player.png",64,86),C.load.spritesheet("background","img/bg.png",630,2e3),C.load.spritesheet("hoverer","img/hoverer.png",96,120),C.load.spritesheet("gun","img/gun.png",67,40),C.load.spritesheet("blade","img/blade.png",68,175),C.load.spritesheet("eye","img/eye.png",40,40),C.load.spritesheet("shards","img/shards.png",48,48),C.load.spritesheet("bullet","img/bullet.png",30,20),C.load.spritesheet("arrows","img/arrows.png",156,156),C.load.spritesheet("lifebar","img/lifebar.png",60,36),C.load.spritesheet("triangle","img/triangle.png",40,40),C.load.spritesheet("combo","img/combo.png",60,40),C.load.spritesheet("pause","img/pause.png",60,60),C.load.spritesheet("begin","img/begin.png",100,40),C.load.spritesheet("credits","img/credits.png",136,40),C.load.spritesheet("sound-on","img/sound-on.png",169,40),C.load.spritesheet("sound-off","img/sound-off.png",187,40),C.load.spritesheet("sound-sfx-only","img/sound-sfx-only.png",274,40),C.load.spritesheet("return","img/return.png",117,40),C.load.image("smoke","img/smoke.png"),C.load.image("fire","img/fire.png"),C.load.image("display","img/display.png"),C.load.audio("music","sfx/music.ogg"),C.load.audio("jetpack","sfx/jetpack.ogg"),C.load.audio("floodlights","sfx/floodlights.ogg"),C.load.audio("helicopter","sfx/helicopter.ogg"),C.load.audio("hit","sfx/hit.ogg"),C.load.audio("hurt","sfx/hurt.ogg"),C.load.audio("explosion","sfx/explosion.ogg"),C.load.audio("gun","sfx/gun.ogg"),C.load.audio("beep","sfx/beep.ogg"),C.load.audio("robot-1","sfx/robot-1.ogg"),C.load.audio("robot-2","sfx/robot-2.ogg"),C.load.audio("robot-3","sfx/robot-3.ogg"),C.load.audio("combo-1","sfx/combo-1.ogg"),C.load.audio("combo-2","sfx/combo-2.ogg"),C.load.audio("combo-3","sfx/combo-3.ogg"),C.load.audio("combo-4","sfx/combo-4.ogg"),C.load.bitmapFont("green","font/green.png","font/green.fnt"),C.load.bitmapFont("white","font/white.png","font/white.fnt")}},{key:"create",value:function(){var t;C.sfx={music:C.add.audio("music",.7,!0),jetpack:C.add.audio("jetpack",.5,!0),floodlights:C.add.audio("floodlights",1,!1),helicopter:C.add.audio("helicopter",1.5,!0),hit:C.add.audio("hit",.8,!1),hurt:C.add.audio("hurt",1,!1),explosion:C.add.audio("explosion",1,!1),gun:C.add.audio("gun",1,!1),beep:C.add.audio("beep",.5,!0),robot:[C.add.audio("robot-1",.5,!1),C.add.audio("robot-2",.5,!1),C.add.audio("robot-3",.5,!1)],combo:[C.add.audio("combo-1",1,!1),C.add.audio("combo-2",1,!1),C.add.audio("combo-3",1,!1),C.add.audio("combo-4",1,!1)]},localStorage.getItem("blast_down_data")?(t=localStorage.getItem("blast_down_data"),C.data=JSON.parse(t)):C.data={highScore:0,soundSetting:0},0==C.data.soundSetting?C.sfx.music.play():1==C.data.soundSetting&&(C.sound.mute=!0),C.world.setBounds(0,0,630,2e3),C.state.start("menu"),console.log(" _ _ _ _ _ \n|  _|  _| |\n| |_  |   |\n|_ _|_|_ _|")}}]),e);function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}var a=(_inherits(s,Phaser.State),_createClass(s,[{key:"create",value:function(){this.background=C.add.image(0,0,"background"),this.display=C.add.image(0,1080,"display"),C.camera.y=1e3;for(var t,e=["PERSONAL ","COMPACT ","BACK-MOUNTED ","PORTABLE ","SMALL-SCALE ","MINIATURE "],a=["FLYING ","LEVITATION ","HOVERING ","UN-FALLING ","AVIATION ","ASCENSION "],s=["APPARATUS","MACHINE","DEVICE","APPLIANCE","UTENSIL","CONTRAPTION"];t=e[Math.floor(Math.random()*e.length)]+a[Math.floor(Math.random()*a.length)]+s[Math.floor(Math.random()*s.length)],30<t.length;);var i=Math.floor(1e4*Math.random());this.soundOptions=[{image:"sound-on",text:"ON"},{image:"sound-off",text:"OFF"},{image:"sound-sfx-only",text:"SFX ONLY"}];var o=C.add.bitmapText(316,1210,"green",String.fromCharCode(9608),32);o.align="center",o.anchor.set(.5,0),o.finalText='CFD INTERNAL PROTOTYPE\n"JETTISON PACK"\n'+t+"\nTEST #"+i,o.fullText=o.finalText+"\n\n\n\nBEGIN\nCREDITS\nSOUND: "+this.soundOptions[C.data.soundSetting].text,o.progress=0,o.anchor.set(.5,0),C.time.events.repeat(40,o.fullText.length,this.updateText,this,o),C.sfx.beep.play()}},{key:"updateText",value:function(t){t.text=t.text.substring(0,t.text.length-1)+t.fullText.charAt(t.progress)+String.fromCharCode(9608),t.progress++,t.progress===t.fullText.length&&(C.sfx.beep.stop(),t.text=t.finalText,C.add.button(265,1485,"begin",this.startGame,this,1,0,1,0),C.add.button(247,1525,"credits",this.viewCredits,this,1,0,1,0),this.soundButton=C.add.button(315,1565,this.soundOptions[C.data.soundSetting].image,this.toggleSound,this,1,0,1,0),this.soundButton.anchor.set(.5,0))}},{key:"startGame",value:function(){C.state.start("main")}},{key:"viewCredits",value:function(){C.state.start("credits")}},{key:"toggleSound",value:function(){C.data.soundSetting=(C.data.soundSetting+1)%3,0==C.data.soundSetting?(this.soundButton.loadTexture("sound-on"),C.sfx.music.play()):1==C.data.soundSetting?(this.soundButton.loadTexture("sound-off"),C.sound.mute=!0,C.sfx.music.pause()):2==C.data.soundSetting&&(this.soundButton.loadTexture("sound-sfx-only"),C.sound.mute=!1,C.sfx.gun.play()),localStorage.setItem("blast_down_data",JSON.stringify(C.data))}}]),s);function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}var i=(_inherits(o,Phaser.Particles.Arcade.Emitter),_createClass(o,[{key:"explodeEnemy",value:function(t,e,a){this.x=t,this.y=e,this.smoke.x=t,this.smoke.y=e,a?this.makeParticles("shards",[3,4,5]):this.makeParticles("shards",[0,1,2]),this.start(!0,2e3,null,5),this.smoke.start(!0,2e3,null,5)}},{key:"explodePlayer",value:function(t,e){this.x=t,this.y=e,this.smoke.x=t,this.smoke.y=e,this.makeParticles("shards",[6,7,8],3),this.start(!0,2e3,null,5),this.smoke.start(!0,2e3,null,5)}}]),o);function o(){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,C));return t.gravity=1600,t.minParticleSpeed.set(-600,-400),t.maxParticleSpeed.set(600,-1200),t.smoke=C.add.emitter(),t.smoke.gravity=-400,t.smoke.makeParticles("smoke"),t.smoke.setScale(.5,2,.5,2,1e3),t.smoke.setAlpha(1,0,2e3),t}var n=(_inherits(r,Phaser.Sprite),_createClass(r,[{key:"update",value:function(){this.x=Math.max(C.camera.x+20,Math.min(this.pointTo.x,C.camera.x+610)),this.y=Math.max(C.camera.y+20,Math.min(this.pointTo.y,C.camera.y+1100)),this.rotation=C.physics.arcade.angleBetween(this,this.pointTo),this.pointTo.x>C.camera.x&&this.pointTo.x<C.camera.x+630&&this.pointTo.y>C.camera.y&&this.pointTo.y<C.camera.y+1120?this.scale.set(0):this.scale.set(1)}}]),r);function r(t,e){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,C,0,0,"triangle"));return C.add.existing(a),e&&(a.frame=1),a.anchor.set(1,.5),a.pointTo=t,a}var l=(_inherits(d,Phaser.Group),_createClass(d,[{key:"update",value:function(){this.moving&&(550<this.x?this.vx=-3:this.x<80&&(this.vx=3),this.x+=this.vx),this.dead?(this.inverted?this.y-=4:this.y+=4,this.angle+=2):this.y+=Math.sin(.005*C.time.now)}},{key:"destroy",value:function(){this.triangle.destroy(),_get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"destroy",this).call(this)}}]),d);function d(t,e,a,s){_classCallCheck(this,d);var i=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,C));return i.x=t<315?-200:830,i.y=e,i.moving=s,i.moving?i.x+=i.x-t:C.add.tween(i).to({x:t},5*Math.abs(i.x-t)).start(),i.triangle=new n(i,!1),i.eye=C.add.sprite(0,0,"eye"),i.eye.anchor.set(.5),i.inverted=a,i.robody=C.add.sprite(0,0,"hoverer"),i.inverted?(i.robody.animations.add("hover",[4,5,6,7],30,!0),i.robody.anchor.set(.5,.6)):(i.robody.animations.add("hover",[0,1,2,3],30,!0),i.robody.anchor.set(.5,.4)),i.robody.animations.play("hover"),C.physics.arcade.enable(i.robody),i.robody.body.immovable=!0,i.robody.body.offset.set(16),i.robody.body.width=64,i.robody.body.height=88,i.add(i.eye),i.add(i.robody),i.enemyType=1,i}var h=(_inherits(p,l),_createClass(p,[{key:"fire",value:function(){C.sfx.gun.play(),this.gun.animations.play("fire"),this.bullet.x=this.x+60*Math.cos(this.gun.rotation),this.bullet.y=this.y+60*Math.sin(this.gun.rotation),this.bullet.rotation=this.gun.rotation,this.bullet.body.velocity.x=700*Math.cos(this.gun.rotation),this.bullet.body.velocity.y=700*Math.sin(this.gun.rotation)}}]),p);function p(t,e,a,s){_classCallCheck(this,p);s=_possibleConstructorReturn(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,t,e,a,s));return s.bullet=C.add.sprite(0,0,"bullet"),s.bullet.anchor.set(.5),s.bullet.animations.add("buzz",[0,1,2],30,!0),s.bullet.animations.play("buzz"),C.physics.arcade.enable(s.bullet),s.bullet.body.immovable=!0,s.gun=C.add.sprite(0,0,"gun"),s.gun.anchor.set(0,.5),s.inverted?(s.gun.frame=0,s.gun.animations.add("fire",[1,2,3,4,5,0],20,!1)):(s.gun.frame=6,s.gun.animations.add("fire",[7,8,9,10,11,6],20,!1)),s.add(s.gun),s.enemyType=3,C.time.events.add(1e3*Math.random(),function(){this.fireLoop=C.time.events.loop(2e3,this.fire,this)},s),s}var u=(_inherits(c,Phaser.Sprite),_createClass(c,[{key:"update",value:function(){1720<=this.body.y&&!this.dead?this.body.velocity.y+=.1*(this.weight-2e3):(this.body.velocity.y+=.2*this.weight,1720<=this.ly&&!this.dead&&(this.animations.play("down-up"),this.body.velocity.y<-1e3&&(this.body.velocity.y*=.8))),this.lvy<=0&&0<this.body.velocity.y&&6!=this.frame&&!this.dead&&this.animations.play("up-down"),this.leftButton.isDown&&!this.dead?(0<this.scale.x&&(this.scale.x=-1),this.body.velocity.x+=.2*(-600-this.body.velocity.x)):this.rightButton.isDown&&!this.dead?(this.scale.x<0&&(this.scale.x=1),this.body.velocity.x+=.2*(600-this.body.velocity.x)):this.body.velocity.x+=.2*(0-this.body.velocity.x),this.body.x<-10?(this.body.x=-10,this.body.velocity.x*=-1):580<this.body.x&&(this.body.x=580,this.body.velocity.x*=-1),this.dead&&--this.angle,this.jet.x=this.body.x+30,this.jet.y=this.body.y+10,this.ly=this.body.y,this.lvy=this.body.velocity.y}},{key:"vincible",value:function(){this.invincible=!1,this.alpha=1}},{key:"jetpackOn",value:function(){C.paused||this.dead||(C.sfx.jetpack.play(),this.jet.on=!0,this.weight=500)}},{key:"jetpackOff",value:function(){C.sfx.jetpack.stop(),this.jet.on=!1,this.weight=200}}]),c);function c(t,e){_classCallCheck(this,c);t=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,C,t,e,"player"));C.add.existing(t),t.animations.add("up-down",[1,2,4,5,6],30,!1),t.animations.add("down-up",[5,4,2,1,0],30,!1),t.anchor.set(.5),t.weight=200,t.health=4,t.invincible=!1,t.jet=C.add.emitter(0,0),t.jet.makeParticles("fire"),t.jet.gravity=-400,t.jet.minParticleSpeed.set(-100,0),t.jet.maxParticleSpeed.set(100,0),t.jet.setScale(1,.5,1,.5,1e3),t.jet.setAlpha(1,0,2e3),t.jet.start(!1,500,15),t.jet.on=!1,t.triangle=new n(t,!0),C.physics.arcade.enable(t),t.leftButton=C.input.keyboard.addKey(Phaser.KeyCode.LEFT),t.rightButton=C.input.keyboard.addKey(Phaser.KeyCode.RIGHT);e=C.input.keyboard.addKey(Phaser.KeyCode.DOWN);return e.onDown.add(t.jetpackOn,t),e.onUp.add(t.jetpackOff,t),t}var y=(_inherits(g,l),_createClass(g,[{key:"update",value:function(){_get(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"update",this).call(this),this.blade.angle+=1,this.blade.body.offset.x=140*Math.sin(this.blade.rotation)+10,this.blade.body.offset.y=140*-Math.cos(this.blade.rotation)+160}}]),g);function g(t,e,a,s){_classCallCheck(this,g);s=_possibleConstructorReturn(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,t,e,a,s));return s.blade=C.add.sprite(0,0,"blade"),s.blade.anchor.set(.5,1),s.inverted?s.blade.animations.add("spin",[5,4,3],30,!0):s.blade.animations.add("spin",[2,1,0],30,!0),s.blade.angle=360*Math.random(),s.blade.animations.play("spin"),C.physics.arcade.enable(s.blade),s.blade.body.width=40,s.blade.body.height=40,s.add(s.blade),s.enemyType=2,s}var f=(_inherits(m,Phaser.Sprite),_createClass(m,[{key:"update",value:function(){--this.y,this.alpha-=.01}},{key:"appear",value:function(t,e,a){this.x=t,this.y=e,this.alpha=1,a=Math.min(a,5),this.animations.play(""+a),C.sfx.combo[a-2].play()}}]),m);function m(){_classCallCheck(this,m);var t=_possibleConstructorReturn(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,C,-100,-100,"combo"));return C.add.existing(t),t.animations.add("2",[0,1],10,!0),t.animations.add("3",[2,3],10,!0),t.animations.add("4",[4,5],10,!0),t.animations.add("5",[6,7],10,!0),t.anchor.set(.5),t}var b=(_inherits(x,Phaser.State),_createClass(x,[{key:"create",value:function(){C.physics.startSystem(Phaser.Physics.ARCADE),this.background=C.add.image(0,0,"background"),this.graphics=C.add.graphics(0,0),this.exploder=new i,this.shakeProgress=40,this.enemies=C.add.group(),this.player=new u(315,1400),this.comboText=new f,this.multiplier=0,this.lastWasInverted=!1,this.noBotsHit=!0,C.score=0,this.visibleScore=0,this.scoreDisplay=C.add.bitmapText(550,5,"white","0"),this.scoreDisplay.anchor.set(1,0),this.lifebar=C.add.sprite(560,10,"lifebar"),this.pauseButton=C.add.sprite(0,0,"pause"),this.display=C.add.sprite(0,1080,"display"),C.add.tween(this.display).to({x:630},500).start(),C.input.keyboard.addKey(Phaser.KeyCode.ESC).onDown.add(this.pauseGame,this),C.input.onDown.add(this.onInputDown,this),this.level=1,this.awaitingNewWave=!0,C.time.events.add(1e3,this.lightsOn,this)}},{key:"update",value:function(){C.camera.y=this.player.body.y-400,this.visibleScore<C.score?this.visibleScore=Math.min(this.visibleScore+.3,C.score):C.sfx.beep.stop(),this.scoreDisplay.y=C.camera.y+12,this.scoreDisplay.text=Math.floor(this.visibleScore),this.lifebar.y=C.camera.y+10,this.pauseButton.y=C.camera.y,0!=this.enemies.length||this.awaitingNewWave||(C.sfx.helicopter.stop(),C.time.events.add(2e3,this.newWave,this),this.awaitingNewWave=!0),this.enemies.forEach(this.updateEnemy,this),this.graphics.clear(),this.graphics.lineStyle(4,0,1),this.graphics.moveTo(0,1800),1720<=this.player.body.y&&!this.player.dead?this.graphics.lineTo(this.player.body.x+40,this.player.body.y+80):1720<=this.player.ly&&(this.noBotsHit?this.multiplier=0:this.noBotsHit=!0),this.graphics.lineTo(630,1800),C.camera.y=C.camera.y+Math.max(0,40-this.shakeProgress)*Math.sin(this.shakeProgress),this.shakeProgress+=2.5}},{key:"lightsOn",value:function(){C.sfx.floodlights.play(),this.background.frame=1,this.tutorialArrows={left:C.add.sprite(50,960,"arrows",0),down:C.add.sprite(240,960,"arrows",1),right:C.add.sprite(430,960,"arrows",2)},C.input.keyboard.addKey(Phaser.KeyCode.LEFT).onDown.addOnce(function(){C.add.tween(this.tutorialArrows.left).to({alpha:0},1e3).start()},this),C.input.keyboard.addKey(Phaser.KeyCode.DOWN).onDown.addOnce(function(){C.add.tween(this.tutorialArrows.down).to({alpha:0},1e3).start(),this.awaitingNewWave=!1},this),C.input.keyboard.addKey(Phaser.KeyCode.RIGHT).onDown.addOnce(function(){C.add.tween(this.tutorialArrows.right).to({alpha:0},1e3).start()},this)}},{key:"onInputDown",value:function(t){t.x<=60&&t.y<=60&&this.pauseGame()}},{key:"pauseGame",value:function(){C.paused=!C.paused,C.paused?this.pauseButton.frame=1:this.pauseButton.frame=0}},{key:"updateEnemy",value:function(t){t.eye.rotation=C.physics.arcade.angleBetween(t,this.player),this.player.dead||(C.physics.arcade.overlap(this.player,t.robody,this.playerHits,null,this),2==t.enemyType&&(this.player.invincible||t.dead||C.physics.arcade.overlap(this.player,t.blade,this.takeDamage,null,this)),3==t.enemyType&&(t.gun.rotation=C.physics.arcade.angleBetween(t,this.player),this.player.invincible||C.physics.arcade.overlap(this.player,t.bullet,this.takeDamage,null,this)))}},{key:"playerHits",value:function(t,e){e.parent.inverted?t.lvy<-600&&!e.parent.dead?(3==e.parent.enemyType&&C.time.events.remove(e.parent.fireLoop),C.sfx.hit.play(),C.sfx.robot[Math.floor(3*Math.random())].play(),t.body.velocity.y=0,e.parent.eye.frame=1,e.parent.dead=!0,C.time.events.add(500,this.robotExplodes,this,e)):(0<t.lvy&&t.y<e.parent.y-60&&this.takeDamage(),C.physics.arcade.collide(t,e)):600<t.lvy&&!e.parent.dead?(3==e.parent.enemyType&&C.time.events.remove(e.parent.fireLoop),C.sfx.hit.play(),C.sfx.robot[Math.floor(3*Math.random())].play(),t.body.velocity.y*=-.4,e.parent.eye.frame=1,e.parent.dead=!0,C.time.events.add(500,this.robotExplodes,this,e)):(t.lvy<50&&t.y>e.parent.y+60&&this.takeDamage(),C.physics.arcade.collide(t,e))}},{key:"takeDamage",value:function(){this.player.invincible||(this.player.health--,this.lifebar.frame++,this.player.health<=0?(C.sfx.explosion.play(),this.player.jetpackOff(),this.exploder.explodePlayer(this.player.x,this.player.y),this.shakeProgress=0,this.player.frame=3,this.player.dead=!0,this.player.triangle.destroy(),C.time.events.add(3e3,C.state.start,C.state,"results")):(C.sfx.hurt.play(),this.player.invincible=!0,this.player.body.velocity.x=0,this.player.body.velocity.y=0,this.player.alpha=.5,C.time.events.add(1e3,this.player.vincible,this.player)))}},{key:"robotExplodes",value:function(t){t.parent&&(C.sfx.explosion.play(),C.sfx.beep.play(),this.shakeProgress=0,this.exploder.explodeEnemy(t.parent.x,t.parent.y,t.parent.inverted),this.player.body.velocity.y+=1600*Math.sin(C.physics.arcade.angleBetween(t.parent,this.player)),this.player.body.velocity.x+=2400*Math.cos(C.physics.arcade.angleBetween(t.parent,this.player)),!this.noBotsHit||t.parent.inverted||this.lastWasInverted?this.multiplier++:this.multiplier=1,2<=this.multiplier&&this.comboText.appear(t.parent.x,t.parent.y,this.multiplier),this.noBotsHit=!1,this.lastWasInverted=t.parent.inverted,1==t.parent.enemyType?C.score+=10*this.multiplier:2==t.parent.enemyType?C.score+=20*this.multiplier:3==t.parent.enemyType&&(C.score+=40*this.multiplier),t.parent.destroy())}},{key:"newWave",value:function(){for(var t=this.level,e=[700,900,1100,1300,1500],a=[60,180,315,450,570];0<t;){var s,i=a.splice(Math.floor(Math.random()*a.length),1)[0],o=e.splice(Math.floor(Math.random()*e.length),1)[0],n=Math.floor(Math.random()*Math.min(t,6))+2;if(2==n?s=new l(i,o,!1,.5<Math.random()):3==n?s=new l(i,o,!0,.5<Math.random()):4==n?s=new y(i,o,!1,.5<Math.random()):5==n?s=new y(i,o,!0,.5<Math.random()):6==n?s=new h(i,o,!1,.5<Math.random()):7==n&&(s=new h(i,o,!0,.5<Math.random())),this.enemies.add(s),t-=n,e.length<=0)break}C.sfx.helicopter.play(),this.awaitingNewWave=!1,this.level++}}]),x);function x(){return _classCallCheck(this,x),_possibleConstructorReturn(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}var v=(_inherits(_,Phaser.State),_createClass(_,[{key:"create",value:function(){C.sfx.helicopter.stop(),this.background=C.add.image(0,0,"background",1),this.display=C.add.image(0,1080,"display"),this.camera.y=1e3;for(var t=C.add.bitmapText(316,1210,"green",String.fromCharCode(9608),32),e=void 0,a=void 0,s=["TRAGIC ","UNFORTUNATE ","CATASTROPHIC ","UNFORESEEN ","MINOR ","REGRETTABLE "],i=["AI ","ROBOTIC ","AUTOMATON ","EQUIPMENT ","TECHNOLOGICAL ","PROGRAMMING "],o=["FAILURE","MISTAKE","MISHAP","COMPLICATION","ACCIDENT","BUG"];e=s[Math.floor(Math.random()*s.length)]+i[Math.floor(Math.random()*i.length)]+o[Math.floor(Math.random()*o.length)],30<e.length;);a=C.score>C.data.highScore?(C.data.highScore=C.score,localStorage.setItem("blast_down_data",JSON.stringify(C.data)),"NEW PERSONAL BEST!"):"YOUR BEST: "+C.data.highScore,t.finalText="TEST TERMINATED\n\nREASON:\n"+e+"\n\nSCORE: "+C.score+"\n"+a,t.fullText=t.finalText+"\n\n\nRETURN",t.align="center",t.progress=0,t.anchor.set(.5,0),C.time.events.repeat(40,t.fullText.length,this.updateText,this,t),C.sfx.beep.play()}},{key:"updateText",value:function(t){t.text=t.text.substring(0,t.text.length-1)+t.fullText.charAt(t.progress)+String.fromCharCode(9608),t.progress++,t.progress==t.fullText.length&&(C.sfx.beep.stop(),t.text=t.finalText,C.add.button(264,1566,"return",this.return,this,1,0,1,0))}},{key:"return",value:function(){C.state.start("menu")}}]),_);function _(){return _classCallCheck(this,_),_possibleConstructorReturn(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}var k=(_inherits(T,Phaser.State),_createClass(T,[{key:"create",value:function(){this.background=C.add.image(0,0,"background"),this.display=C.add.image(0,1080,"display"),this.camera.y=1e3;var t=C.add.bitmapText(316,1210,"green",String.fromCharCode(9608),32);t.finalText="DESIGN, PROGRAMMING, ART\nCHRIS KLIMOWSKI\n\nMUSIC\nINCOMPETECH\n\nSOUND EFFECTS\nFREESOUND.ORG",t.fullText=t.finalText+"\n\nRETURN",t.align="center",t.progress=0,t.anchor.set(.5,0),C.time.events.repeat(40,t.fullText.length,this.updateText,this,t),C.sfx.beep.play()}},{key:"updateText",value:function(t){t.text=t.text.substring(0,t.text.length-1)+t.fullText.charAt(t.progress)+String.fromCharCode(9608),t.progress++,t.progress==t.fullText.length&&(C.sfx.beep.stop(),t.text=t.finalText,C.add.button(264,1566,"return",this.return,this,1,0,1,0))}},{key:"return",value:function(){C.state.start("menu")}}]),T);function T(){return _classCallCheck(this,T),_possibleConstructorReturn(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}var C=new Phaser.Game(630,1120,Phaser.AUTO,"game");return C.state.add("load",t),C.state.add("main",b),C.state.add("menu",a),C.state.add("credits",k),C.state.add("results",v),C.state.start("load"),C}();