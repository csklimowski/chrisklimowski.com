"use strict";var _get=function t(i,a,s){null===i&&(i=Function.prototype);var e=Object.getOwnPropertyDescriptor(i,a);if(void 0===e){var h=Object.getPrototypeOf(i);return null===h?void 0:t(h,a,s)}if("value"in e)return e.value;var r=e.get;return void 0!==r?r.call(s):void 0},_createClass=function(){function s(t,i){for(var a=0;a<i.length;a++){var s=i[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,a){return i&&s(t.prototype,i),a&&s(t,a),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}var game=function(){function o(t){return 200*(Math.cos(2.5*t)+1.15)}function a(t){return 50*(Math.cos(2.5*t)+1.15)}function h(t){return 350+400*t}var t=(_inherits(s,Phaser.Sprite),_createClass(s,[{key:"update",value:function(){var t=v.time.elapsedMS/1e3,i=Math.sqrt(this.tx*this.tx+this.ty*this.ty);0==i?(this.ax=0,this.ay=0,this.particles.on=!1):(this.particles.on=!0,this.ax=this.tx/i*this.speed,this.ay=this.ty/i*this.speed),this.vx+=10*(this.ax-this.vx)*t,this.vy+=10*(this.ay-this.vy)*t,this.px+=this.vx*t,this.py+=this.vy*t;var a=.9*o(v.timer);if(a<Math.sqrt(this.px*this.px+this.py*this.py)){var s=Math.atan2(this.py,this.px);this.py=Math.sin(s)*a,this.px=Math.cos(s)*a}this.x=v.width/2+this.px,this.y=h(v.timer)+.25*this.py,this.particles.x=this.x,this.particles.y=h(v.timer)+.25*this.py}}]),s);function s(){_classCallCheck(this,s);var t=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,v,0,0,"chest-bury",19));v.add.existing(t),t.x=0,t.y=0,t.px=0,t.py=0,t.vx=0,t.vy=0,t.ax=0,t.ay=0,t.tx=0,t.ty=0,t.speed=200,t.state=0,t.anchor.set(.5);var i=v.add.emitter();return i.makeParticles("sand-particle"),i.width=15,i.height=5,i.minParticleScale=.5,i.maxParticleScale=1.2,i.setXSpeed(-20,20),i.setYSpeed(-50,-30),i.gravity=400,i.start(!1,300,70),t.particles=i,t}var d=(_inherits(e,t),_createClass(e,[{key:"update",value:function(){var t=v.time.elapsedMS/1e3;if(this.lifetime-=t,this.lifetime<0)this.particles.destroy(),this.destroy();else if(this.lifetime<.3)this.tx=0,this.ty=0;else{var i=Math.atan2(this.ty,this.tx);i+=(10*Math.random()*Math.PI-5*Math.PI)*t;var a=Math.sqrt((this.px+this.vx)*(this.px+this.vx)+(this.py+this.vy)*(this.py+this.vy));o(v.timer)-a<-120&&(i+=Math.PI),this.ty=Math.sin(i),this.tx=Math.cos(i)}_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}}]),e);function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=2*Math.random()*Math.PI,a=Math.random()*o(v.timer);t.py=Math.sin(i)*a,t.px=Math.cos(i)*a;var s=2*Math.random()*Math.PI;return t.ty=Math.sin(s),t.tx=Math.cos(s),t.lifetime=.5+2*Math.random(),t}var r=(_inherits(i,t),_createClass(i,[{key:"update",value:function(){var t=v.time.elapsedMS/1e3;0==this.state?(this.keys.left.isDown&&this.keys.right.isDown?this.tx=0:this.keys.left.isDown?this.tx=-1:this.keys.right.isDown?this.tx=1:this.tx=0,this.keys.up.isDown&&this.keys.down.isDown?this.ty=0:this.keys.up.isDown?this.ty=-1:this.keys.down.isDown?this.ty=1:this.ty=0,0==this.tx&&0==this.ty?(this.stillClock-=t,this.stillClock<0&&!this.appeared&&(this.animations.play("appear"),this.appeared=!0)):(this.appeared&&(this.animations.play("disappear"),this.appeared=!1),this.stillClock=3)):(this.stillClock=3,this.tx=0,this.ty=0),_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"update",this).call(this)}}]),i);function i(){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.keys={up:v.input.keyboard.addKey(Phaser.KeyCode.W),left:v.input.keyboard.addKey(Phaser.KeyCode.A),down:v.input.keyboard.addKey(Phaser.KeyCode.S),right:v.input.keyboard.addKey(Phaser.KeyCode.D)},t.stillClock=3,t.appeared=!1,t.animations.add("appear",_.range(14,20).reverse(),20,!1),t.animations.add("disappear",_.range(14,20),20,!1),t.animations.add("bury",[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(_.range(20)),30,!1),v.tutorial&&t.animations.play("bury"),t}var n=(_inherits(l,Phaser.Sprite),_createClass(l,[{key:"update",value:function(){var t=v.time.elapsedMS/1e3;0==this.state||3==this.state?(this.keys.left.isDown&&this.keys.right.isDown?this.tx=0:this.keys.left.isDown?this.tx=-1:this.keys.right.isDown?this.tx=1:this.tx=0,this.keys.up.isDown&&this.keys.down.isDown?this.ty=0:this.keys.up.isDown?this.ty=-1:this.keys.down.isDown?this.ty=1:this.ty=0):(this.tx=0,this.ty=0);var i=Math.sqrt(this.tx*this.tx+this.ty*this.ty);0==i?(this.ax=0,this.ay=0):(this.ax=this.tx/i*this.speed,this.ay=this.ty/i*this.speed),this.vx+=10*(this.ax-this.vx)*t,this.vy+=10*(this.ay-this.vy)*t,this.px+=this.vx*t,this.py+=this.vy*t,this.scale.set(1+2e-4*this.py);var a=Math.sqrt(this.px*this.px+this.py*this.py);if(400<a){var s=Math.atan2(this.py,this.px);this.py=400*Math.sin(s),this.px=400*Math.cos(s)}if(3!=this.state&&0!=this.state||(this.rotation=.1*Math.cos(v.time.now/1e3*Math.PI),this.px+=Math.sin(v.time.now/1e3*Math.PI)),this.x=v.width/2+this.px,this.y=this.altitude+.25*this.py,this.shadow.clear(),a<o(v.timer)&&this.shadow.on){var e=60-.1*(h(v.timer)-this.y);this.shadow.x=this.x,this.shadow.y=h(v.timer)+.25*this.py,this.shadow.beginFill(0,.3),this.shadow.drawEllipse(0,0,e,.25*e)}this.rope.clear(),this.rope.lineStyle(7,6702080),this.rope.moveTo(0,-140),this.rope.lineTo(0,-1e3),2==this.state?(this.altitude=h(v.timer),this.foundSomething&&(this.whatIFound.y=Math.max(this.whatIFound.y-200*t,-120),this.whatIFound.scale.x=Math.min(this.whatIFound.scale.x+t,.6),this.whatIFound.scale.y=Math.min(this.whatIFound.scale.y+t,.6))):(this.whatIFound.y=0,this.whatIFound.scale.set(0)),3==this.state&&(this.altitude=Math.max(this.altitude-500*t,200),200==this.altitude&&(this.state=0)),4==this.state&&(this.altitude=Math.min(this.altitude+300*t,200),200==this.altitude&&(this.state=0)),1==this.state&&(this.altitude=Math.min(this.altitude+1500*t,h(v.timer)),a<o(v.timer)?this.altitude>=h(v.timer)&&(this.state=2,this.onAnchorLand.call(this.onAnchorLandContext)):(this.altitude>=h(v.timer)||300<this.y&&o((this.y-350)/400)<Math.abs(this.x-v.width/2))&&(v.sfx.hit_glass.play(),this.state=3))}},{key:"destroy",value:function(){this.shadow.destroy(),_get(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"destroy",this).call(this)}}]),l);function l(t,i){_classCallCheck(this,l);var a=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,v,0,0,"anchor"));a.shadow=v.add.graphics(0,0),a.shadow.on=!0,a.rope=v.add.graphics(0,0),a.addChild(a.rope),v.add.existing(a);var s=v.add.emitter();s.makeParticles("sand-particle"),s.width=60,s.height=10,s.minParticleScale=.5,s.maxParticleScale=1.2,s.setXSpeed(-40,40),s.setYSpeed(-200,-300),s.gravity=700,a.exploder=s,a.addChild(s);var e=v.add.sprite(0,0,"swayblue");return e.animations.add("swayblue",_.range(60),30,!0),e.animations.play("swayblue"),e.anchor.set(.93,1.05),a.addChild(e),a.lizard=e,a.foundSomething=!1,a.chest=v.add.sprite(0,0,"chest"),a.chest.anchor.set(.5),a.chest.scale.set(0),a.addChild(a.chest),a.bug=v.add.sprite(0,0,"bug"),a.bug.animations.add("bugflap",[0,1,2,3],30,!0),a.bug.animations.play("bugflap"),a.bug.anchor.set(.5),a.bug.scale.set(0),a.addChild(a.bug),a.whatIFound=a.chest,a.x=0,a.y=0,a.px=0,a.py=0,a.vx=0,a.vy=0,a.ax=0,a.ay=0,a.tx=0,a.ty=0,a.altitude=200,a.speed=400,a.state=0,a.onAnchorLand=t,a.onAnchorLandContext=i,a.anchor.set(.5,1),a.keys={up:v.input.keyboard.addKey(Phaser.KeyCode.I),left:v.input.keyboard.addKey(Phaser.KeyCode.J),down:v.input.keyboard.addKey(Phaser.KeyCode.K),right:v.input.keyboard.addKey(Phaser.KeyCode.L)},a}var p=(_inherits(u,Phaser.Graphics),_createClass(u,[{key:"update",value:function(){var t=this.ellipse;t.width=o(v.timer),t.height=a(v.timer),t.y=h(v.timer),this.clear(),this.beginFill(t.shadeColor);for(var i=v.timer;i<1;i+=.05)this.drawEllipse(v.width/2,h(i),o(i),a(i));this.beginFill(t.color),this.drawEllipse(t.x,t.y,t.width,t.height)}}]),u);function u(){_classCallCheck(this,u);var t=_possibleConstructorReturn(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,v,0,0));return v.add.existing(t),t.ellipse={x:v.width/2,y:0,width:0,height:0,color:16637815,shadeColor:15519334},t}var c=(_inherits(y,Phaser.Sprite),_createClass(y,[{key:"update",value:function(){var t=this.p*o(v.timer);this.py=Math.sin(this.angleToCenter)*t,this.px=Math.cos(this.angleToCenter)*t,this.y=h(v.timer)+.25*this.py,this.x=v.width/2+this.px,this.scale.set(.65+5e-4*this.py),v.timer>this.d?this.standing&&(this.loadTexture("cactus-fall"),this.animations.play("fall"),this.standing=!1):this.standing||(this.loadTexture("cactus-dance"),this.animations.play("dance"),this.standing=!0)}}]),y);function y(t){_classCallCheck(this,y);var i=_possibleConstructorReturn(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,v,0,0,"cactus-dance"));v.add.existing(i),i.animations.add("dance",_.range(60),30,!0),i.animations.add("fall",_.range(0,20).reverse(),30,!1),i.animations.play("dance"),i.standing=!0,i.d=t,i.anchor.set(.75,.9),i.angleToCenter=2*Math.random()*Math.PI,i.p=.7*Math.random();var a=i.p*o(v.timer);return i.py=Math.sin(i.angleToCenter)*a,i.px=Math.cos(i.angleToCenter)*a,i.y=h(v.timer)+.25*i.py,i.x=v.width/2+i.px,i.scale.set(.65*i.y/v.height),i}var g=(_inherits(m,Phaser.State),_createClass(m,[{key:"create",value:function(){v.sfx.title.pause(),v.stage.backgroundColor=5614318,v.timer=.3,this.totalTime=0,this.state=0,this.tutorialState=0,v.add.image(0,0,"game-bg"),this.group2=v.add.group(),this.sand=new p,this.group2.add(this.sand),this.group2.pivot.set(v.width/2,1.24*v.height),this.group2.x=v.width/2,this.group2.y=1.24*v.height;var t=v.add.group();this.hider=new r,t.add(this.hider),this.anchor=new n(this.onAnchorLand,this),t.add(this.anchor);var i=new d;if(t.add(i),this.group=t,!v.tutorial){var a=2*Math.random()*Math.PI,s=Math.random()*o(v.timer);this.hider.py=Math.sin(a)*s,this.hider.px=Math.cos(a)*s}this.wanders=v.add.group(),this.wanders.add(i),t.pivot.set(v.width/2,1.24*v.height),t.x=v.width/2,t.y=1.24*v.height,this.cacti=[new c(.9)],this.spawnClock=Math.random();for(var e=0;e<1;e++)t.add(this.cacti[e]);this.hourglass=v.add.sprite(v.width/2,1.24*v.height,"hourglass"),this.hourglass.anchor.set(.5),this.hourglass.scale.set(1.4),this.tutorialStuff=v.add.group(),v.tutorial&&(this.state=4,this.tutorial1=v.add.image(640,-200,"tutorial-1"),this.tutorial1.anchor.set(.5),this.tutorial1.dy=180,this.tutorial2=v.add.image(640,920,"tutorial-2"),this.tutorial2.anchor.set(.5),this.tutorial2.dy=920,this.tutorial3=v.add.image(-600,360,"tutorial-3"),this.tutorial3.anchor.set(.5),this.tutorial3.dx=-600,this.tutorialStuff.add(this.tutorial1),this.tutorialStuff.add(this.tutorial2),this.tutorialStuff.add(this.tutorial3),this.anchor.shadow.on=!1,this.anchor.altitude=-200,v.timer=.4),this.greenOnTop=!1,v.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR).onDown.add(function(){4==this.state&&0==this.tutorialState||0!=this.anchor.state||3==this.state||(this.anchor.state=1)==this.tutorialState&&(this.tutorial2.dy=920)},this),v.sfx.orange.play("",0,0,!0),v.sfx.purple.play("",0,1,!0)}},{key:"update",value:function(){var t=v.time.elapsedMS/1e3;if(this.totalTime+=t,3==this.state&&(v.timer=Math.min(v.timer+t,2)),0==this.state&&(v.timer+=t/40+this.totalTime/15e4,.85<v.timer)){this.state=3,this.anchor.state=3,v.tutorial&&(this.tutorial3.dx=-600,localStorage.setItem("our_glass_data",JSON.stringify({tutorial:!1})));var i=v.add.image(370,250,"winner");this.tutorialStuff.add(i),this.greenOnTop?i.frame=1:i.frame=0,v.add.button(460,400,"play-again",function(){v.tutorial=!1,v.state.restart()},this,1,0)}var a=this.group;if(this.spawnClock-=t,this.spawnClock<0){var s=new d;a.add(s),this.wanders.add(s),this.spawnClock=1+.5*Math.random()}if(v.world.bringToTop(a),v.world.bringToTop(this.tutorialStuff),a.sort("py",Phaser.Group.SORT_ASCENDING),1!=this.state&&2!=this.state||(this.hourglass.rotation+=Math.PI*t,this.group.rotation+=Math.PI*t,this.group2.rotation+=Math.PI*t),1==this.state&&this.group.rotation>Math.PI/2){this.group.rotation=-Math.PI/2,this.group2.rotation=-Math.PI/2,this.hourglass.rotation=-Math.PI/2,v.timer=.85-v.timer;var e=2*Math.random()*Math.PI,h=Math.random()*o(v.timer);this.hider.py=Math.sin(e)*h,this.hider.px=Math.cos(e)*h,this.hider.frame=19,this.hider.appeared=!1,this.anchor.altitude=200,this.anchor.state=0,this.greenOnTop?this.anchor.lizard.loadTexture("swayblue"):this.anchor.lizard.loadTexture("sway"),this.greenOnTop=!this.greenOnTop,this.anchor.lizard.animations.play("sway");var r=this.anchor.keys;this.anchor.keys=this.hider.keys,this.hider.keys=r,this.state=2,v.sfx.whoosh.play(),this.greenOnTop?(v.sfx.purple.fadeOut(1e3),v.sfx.orange.fadeIn(1e3,!0)):(v.sfx.orange.fadeOut(1e3),v.sfx.purple.fadeIn(1e3,!0))}2==this.state&&0<=this.group.rotation&&(1==this.tutorialState&&(this.tutorial3.dx=640,this.tutorialState=2,this.totalTime=0),this.state=0,this.hider.state=0,this.anchor.shadow.on=!0,this.spawnClock=Math.random(),this.group.rotation=0,this.group2.rotation=0,this.hourglass.rotation=0,this.greenOnTop?v.sfx.jojoba_voice.play():v.sfx.cholla_voice.play()),v.tutorial&&(0!=this.tutorialState||15<this.totalTime&&(this.tutorialState=1,this.tutorial2.dy=550,this.tutorial1.dy=-200,this.anchor.state=4,this.anchor.shadow.on=!0),1!=this.tutorialState||25<this.totalTime&&(this.tutorial2.dy=920),this.tutorial1.y+=.1*(this.tutorial1.dy-this.tutorial1.y),this.tutorial2.y+=.1*(this.tutorial2.dy-this.tutorial2.y),this.tutorial3.x+=.1*(this.tutorial3.dx-this.tutorial3.x))}},{key:"onAnchorLand",value:function(){if(3!=this.state){this.anchor.foundSomething=!1;var t=Math.sqrt(Math.pow(this.anchor.px-this.hider.px,2)+Math.pow(this.anchor.py-this.hider.py,2));v.sfx.hit_ground.play(),t<90?(this.anchor.foundSomething=!0,this.anchor.whatIFound=this.anchor.chest,this.spawnClock=1e4,this.hider.state=1,this.hider.frame=19,v.time.events.add(1e3,function(){3!=this.state&&(this.anchor.shadow.on=!1,this.state=1)},this),2==this.tutorialState&&(this.tutorial3.dx=-600,this.tutorialState=3),v.sfx.hit_chest.play()):(this.wanders.forEach(function(t){Math.sqrt(Math.pow(this.anchor.px-t.px,2)+Math.pow(this.anchor.py-t.py,2))<150&&(this.anchor.foundSomething=!0,this.anchor.whatIFound=this.anchor.bug,v.sfx.bug_bad.play())},this),v.time.events.add(1e3,function(){this.anchor.state=3},this))}}}]),m);function m(){return _classCallCheck(this,m),_possibleConstructorReturn(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}var f=(_inherits(w,Phaser.State),_createClass(w,[{key:"preload",value:function(){v.add.text(v.width/2,v.height/2,"Loading...",{font:"30px sans-serif",fill:"#ffffff",align:"center"}).anchor.set(.5),v.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,v.scale.windowConstraints.bottom="layout",v.scale.pageAlignHorizontally=!0,v.scale.pageAlignVertically=!0,v.load.image("sand-particle","img/sand-particle.png"),v.load.image("chest","img/chest.png"),v.load.image("anchor","img/anchor.png"),v.load.image("hourglass","img/hourglass.png"),v.load.image("game-bg","img/game-bg.png"),v.load.image("title-bg","img/title-bg.png"),v.load.image("logo","img/logo.png"),v.load.image("player1","img/player1.png"),v.load.image("player2","img/player2.png"),v.load.image("press","img/press.png"),v.load.image("ready","img/ready.png"),v.load.image("tutorial-1","img/tutorial-1.png"),v.load.image("tutorial-2","img/tutorial-2.png"),v.load.image("tutorial-3","img/tutorial-3.png"),v.load.image("created-by","img/created-by.png"),v.load.spritesheet("w","img/w.png",80,74),v.load.spritesheet("a","img/a.png",80,74),v.load.spritesheet("s","img/s.png",80,74),v.load.spritesheet("d","img/d.png",80,74),v.load.spritesheet("i","img/i.png",80,74),v.load.spritesheet("j","img/j.png",80,74),v.load.spritesheet("k","img/k.png",80,74),v.load.spritesheet("l","img/l.png",80,74),v.load.spritesheet("play","img/play.png",140,76),v.load.spritesheet("credits","img/credits.png",211,59),v.load.spritesheet("back","img/back.png",152,60),v.load.spritesheet("play-again","img/play-again.png",326,77),v.load.spritesheet("winner","img/winner.png",502,59),v.load.spritesheet("sway","img/sway-green.png",150,150),v.load.spritesheet("swayblue","img/sway-blue.png",150,150),v.load.spritesheet("cactus-dance","img/cactus-dance.png",140,150),v.load.spritesheet("cactus-fall","img/cactus-fall.png",128,149),v.load.spritesheet("chest-bury","img/chest-bury.png",150,150),v.load.spritesheet("bug","img/bug.png",120,120),v.load.spritesheet("left","img/title-left.png",231,355),v.load.spritesheet("right","img/title-right.png",231,355),v.load.audio("hit_chest","audio/anchor_hit_chest.ogg"),v.load.audio("hit_glass","audio/anchor_hit_glass.ogg"),v.load.audio("hit_ground","audio/anchor_hit_ground.ogg"),v.load.audio("bury_chest","audio/bury_chest.ogg"),v.load.audio("anchor_fall","audio/falling_anchor.ogg"),v.load.audio("whoosh","audio/hourglass_flip_whoosh.ogg"),v.load.audio("jojoba_voice","audio/jojoba_voice.ogg"),v.load.audio("cholla_voice","audio/cholla_voice.ogg"),v.load.audio("orange","audio/orange_music.ogg"),v.load.audio("purple","audio/purple_music.ogg"),v.load.audio("bug_bad","audio/bug_bad.ogg"),v.load.audio("titlemusic","audio/title_music.ogg")}},{key:"create",value:function(){var t=localStorage.getItem("our_glass_data");t?t=JSON.parse(t):(t={tutorial:!0},localStorage.setItem("our_glass_data",JSON.stringify(t))),v.tutorial=t.tutorial,v.sfx={hit_chest:v.add.sound("hit_chest",.2),hit_glass:v.add.sound("hit_glass",1),hit_ground:v.add.sound("hit_ground",1),bury:v.add.sound("bury_chest",1),fall:v.add.sound("anchor_fall",1),whoosh:v.add.sound("whoosh",2),jojoba_voice:v.add.sound("jojoba_voice",.5),cholla_voice:v.add.sound("cholla_voice",.5),orange:v.add.sound("orange",1),purple:v.add.sound("purple",1),bug_bad:v.add.sound("bug_bad",1),title:v.add.sound("titlemusic",1)},v.state.start("title")}}]),w);function w(){return _classCallCheck(this,w),_possibleConstructorReturn(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}var x=(_inherits(b,Phaser.State),_createClass(b,[{key:"create",value:function(){v.add.image(0,0,"title-bg"),this.left=v.add.sprite(350,500,"left"),this.left.anchor.set(.5),this.left.animations.add("left",_.range(60),30,!0),this.left.animations.play("left"),this.left.dx=350,this.right=v.add.sprite(v.width-350,500,"right"),this.right.anchor.set(.5),this.right.animations.add("right",_.range(60),30,!0),this.right.animations.play("right"),this.right.dx=v.width-350,this.logo=v.add.image(v.width/2,150,"logo"),this.logo.anchor.set(.5),this.logo.dy=150,this.credits=v.add.button(v.width/2,560,"credits",function(){this.left.dx=200,this.right.dx=v.width-200,this.play.dy-=720,this.logo.dy-=720,this.credits.dy-=720,this.createdBy.dy-=720,this.back.dy-=720},this,1,0),this.credits.dy=560,this.credits.anchor.set(.5),this.play=v.add.button(v.width/2,450,"play",function(){this.logo.dy=-200,this.leftStart.dx=350,this.rightStart.dx=v.width-350,this.play.dy=900,this.credits.dy=1010,this.play.frame=0},this,1,0),this.play.dy=450,this.play.anchor.set(.5),this.back=v.add.button(v.width/2,1350,"back",function(){this.left.dx=350,this.right.dx=v.width-350,this.play.dy+=720,this.logo.dy+=720,this.credits.dy+=720,this.createdBy.dy+=720,this.back.dy+=720},this,1,0),this.back.dy=1350,this.back.anchor.set(.5),this.createdBy=v.add.image(v.width/2,1e3,"created-by"),this.createdBy.anchor.set(.5),this.createdBy.dy=1e3,this.player1=v.add.image(0,0,"player1"),this.player1.anchor.set(.5),this.press1=v.add.image(-250,100,"press"),this.ready1=v.add.image(0,-200,"ready"),this.ready1.anchor.set(.5),this.w=v.add.image(-60,85,"w"),this.a=v.add.image(20,85,"a"),this.s=v.add.image(80,85,"s"),this.d=v.add.image(150,85,"d"),this.leftStart=v.add.group(),this.leftStart.x=-250,this.leftStart.dx=-250,this.leftStart.y=100,this.leftStart.add(this.player1),this.leftStart.add(this.press1),this.leftStart.add(this.ready1),this.leftStart.add(this.w),this.leftStart.add(this.a),this.leftStart.add(this.s),this.leftStart.add(this.d),this.player2=v.add.image(0,0,"player2"),this.player2.anchor.set(.5),this.press2=v.add.image(-230,100,"press"),this.ready2=v.add.image(0,-200,"ready"),this.ready2.anchor.set(.5),this.i=v.add.image(-40,85,"i"),this.j=v.add.image(20,85,"j"),this.k=v.add.image(95,85,"k"),this.l=v.add.image(170,85,"l"),this.rightStart=v.add.group(),this.rightStart.x=v.width+250,this.rightStart.dx=v.width+250,this.rightStart.y=100,this.rightStart.add(this.player2),this.rightStart.add(this.press2),this.rightStart.add(this.ready2),this.rightStart.add(this.i),this.rightStart.add(this.j),this.rightStart.add(this.k),this.rightStart.add(this.l),v.sfx.title.play("",0,1,!0),v.input.keyboard.addKey(Phaser.KeyCode.W).onDown.add(function(){this.pressedLetter.call(this,["w"])},this),v.input.keyboard.addKey(Phaser.KeyCode.A).onDown.add(function(){this.pressedLetter.call(this,["a"])},this),v.input.keyboard.addKey(Phaser.KeyCode.S).onDown.add(function(){this.pressedLetter.call(this,["s"])},this),v.input.keyboard.addKey(Phaser.KeyCode.D).onDown.add(function(){this.pressedLetter.call(this,["d"])},this),v.input.keyboard.addKey(Phaser.KeyCode.I).onDown.add(function(){this.pressedLetter.call(this,["i"])},this),v.input.keyboard.addKey(Phaser.KeyCode.J).onDown.add(function(){this.pressedLetter.call(this,["j"])},this),v.input.keyboard.addKey(Phaser.KeyCode.K).onDown.add(function(){this.pressedLetter.call(this,["k"])},this),v.input.keyboard.addKey(Phaser.KeyCode.L).onDown.add(function(){this.pressedLetter.call(this,["l"])},this)}},{key:"pressedLetter",value:function(t){this[t].frame=1,this.w.frame&&this.a.frame&&this.s.frame&&this.d.frame&&(this.w.y=-200,this.a.y=-200,this.s.y=-200,this.d.y=-200,this.press1.y=-200,this.ready1.y=120),this.i.frame&&this.j.frame&&this.k.frame&&this.l.frame&&(this.i.y=-200,this.j.y=-200,this.k.y=-200,this.l.y=-200,this.press2.y=-200,this.ready2.y=120),this.w.frame&&this.a.frame&&this.s.frame&&this.d.frame&&this.i.frame&&this.j.frame&&this.k.frame&&this.l.frame&&v.time.events.add(1e3,function(){v.state.start("main")},this)}},{key:"update",value:function(){var t=v.time.elapsedMS/1e3;this.logo.y+=3*(this.logo.dy-this.logo.y)*t+Math.cos(v.time.time/500),this.play.y+=3*(this.play.dy-this.play.y)*t,this.credits.y+=3*(this.credits.dy-this.credits.y)*t,this.leftStart.x+=3*(this.leftStart.dx-this.leftStart.x)*t,this.rightStart.x+=3*(this.rightStart.dx-this.rightStart.x)*t,this.left.x+=3*(this.left.dx-this.left.x)*t,this.right.x+=3*(this.right.dx-this.right.x)*t,this.back.y+=3*(this.back.dy-this.back.y)*t,this.createdBy.y+=3*(this.createdBy.dy-this.createdBy.y)*t}}]),b);function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}var v=new Phaser.Game(1280,720,Phaser.AUTO,"game");return v.state.add("load",f),v.state.add("title",x),v.state.add("main",g),v.state.start("load"),v}();